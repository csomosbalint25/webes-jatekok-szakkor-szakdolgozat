<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="anyag.css" title="normal">
    <!--<link rel="alternate stylesheet" type="text/css" href="nagybetus.css" title="nagybetus">-->
    <link rel="icon" type="image" href="k√©pek/favicon-curly-bracket.png">
    <title>Almasz√ºret - Webes j√°t√©kok szakk√∂r</title>
</head>
<body>
    <header>
        <ul>
            <li><a href="index.html">Kezd≈ëlap</a></li>
            <li>Forr√°sok</li>
            <li>√ìrav√°zlatok</li>
            <li>R√≥lunk</li>
        </ul>
    </header>

    <main>
        <div class="cim">
            <div>
                <p><span></span>Szakk√∂ri seg√©danyag</p>
                <h1>Almasz√ºret üçé</h1>
            </div>
        </div>
        
        <div class="anyag">
            <h2>√Åttekint√©s</h2>

            <div class="informacio-ido">
                <figure>
                    <img src="k√©pek/√≥ra.png">
                </figure>
                <p>45'</p>
            </div>
            <div class="informacio-szint">
                <figure>
                    <img src="k√©pek/csillag.png">
                </figure>
                <p>k√∂nny≈±</p>
            </div>

            <h3>A j√°t√©k c√©lja</h3>
            <p>Indulhat az almasz√ºret? Kapj el annyi <b>piros alm√°t</b>, amennyit csak tudsz, <b>ne hagyj ki</b> egyet se! Szerezz min√©l t√∂bb pontot, de vigy√°zz, mert a <b>romlott alma</b> v√©get vet a j√°t√©knak...</p>
            <p>Ebben a projektben megismerkedhetsz a <b>kl√≥noz√°s</b>sal, hogy v√©gtelen sok alm√°t tudj elkapni.</p>
            
            <a href="8 Almasz√ºret/index.html">
                <div class="megtekintes-gomb">
                    <p>Interakt√≠v p√©lda</p>
                </div>
            </a>

        </div>

        <div class="utmutato">
            <h2>√ötmutat√≥</h2>
            <p>Az √∫tmutat√≥ a <a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> fejleszt≈ëi k√∂rnyezethez k√©sz√ºlt.</p>
            
            <h3>HTML</h3>

            <p>Induljunk ki a m√°r j√≥l ismert alapstrukt√∫r√°b√≥l. A canvas sz√©less√©g√©t √©s magass√°g√°t √∫gy hat√°rozzuk meg, hogy egy <b>600px sz√©les √©s 400px magas j√°t√©kteret</b> kapjunk!</p>

            <pre>
                <code>
&lt;!DOCTYPE html&gt;
&lt;html lang="hu"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;<span class="kodkiemeles">Sz√ºret</span>&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;style&gt;
        canvas{
            border: 1px solid black;
        }
    &lt;/style&gt;
    &lt;h1&gt;<span class="kodkiemeles">Sz√ºret</span>&lt;/h1&gt;
    &lt;canvas width="<span class="kodkiemeles">600</span>" height="<span class="kodkiemeles">400</span>" id="vaszon"&gt;&lt;/canvas&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
                </code>
            </pre>
            
            <h3>JavaScript</h3>

            <p>T√∂lts√ºk le a <a href="../8 Almasz√ºret kiindul√°s/index.js">kiindul√≥f√°jlt</a> √©s n√©zz√ºk meg, mely k√≥dr√©szek √°llnak rendelkez√©s√ºnkre √©s melyeket kell m√©g nek√ºnk meg√≠rni!</p>

            <p>Rendelkez√©sre √°ll:</p>

            <ul>
                <li>a canvas el√©r√©se</li>
                <li>a szerepl≈ëk √©s objektumok m√©ret√©nek alapj√°ul szolg√°l√≥ konstans (<span class="kodreszlet">32</span> px)</li>
                <li>a k√©pek import√°l√°sa</li>
                <li>n√©h√°ny v√°ltoz√≥</li>
                <li>az id≈ëalap√∫ anim√°ci√≥s ciklus</li>
                <li>a h√°tt√©r, a talaj, a fat√∂rzs, √©s a felh≈ë kirajzol√°sa</li>
                <li>a v√©letlen eg√©szt gener√°l√≥ f√ºggv√©ny</li>
                <li>az √ºtk√∂z√©s ellen≈ërz√©s√©t vizsg√°l√≥ f√ºggv√©ny</li>
            </ul>

            <p>Ki kell dolgozni:</p>

            <ul>
                <li><b>a <span class="kodreszlet">kos√°r</span> objektumot √©s annak kirajzol√°s√°t</b></li>
                <li><b>az √©ppen hull√≥ alm√°kat t√°rol√≥ t√∂mb√∂t</b></li>
                <li><b>az √©ppen lenyomva tartott billenty≈±ket t√°rol√≥ t√∂mb√∂t</b></li>
                <li><b>az alm√°k kirajzol√°s√°t</b></li>
                <li><b>a begy≈±jt√∂tt alm√°k sz√°m√°nak ki√≠r√°s√°t</b></li>
                <li><b>a <span class="kodreszlet">friss√≠t√©s(dt)</span> f√ºggv√©nyt</b></li>
                <li><b>a lenyomott billenty≈±k elt√°rol√°s√°t</b></li>
                <li><b>az √∫j alm√°kat l√©trehoz√≥ f√ºggv√©nyt</b></li>
            </ul>

            <h4>A <span class="kodreszlet">kos√°r</span> objektum l√©trehoz√°sa √©s kirajzol√°sa</h4>

            <p>A <span class="kodreszlet">kos√°r</span> objektumot (a kor√°bbi objektumokhoz hasonl√≥an) t√©glalapk√©nt √≠rjuk le, hogy az √ºtk√∂z√©st k√∂nnyen tudjuk vizsg√°lni az <span class="kodreszlet">√ºtk√∂znek(t√©glalap1, t√©glalap2)</span> f√ºggv√©nnyel.</p>

            <pre>
                <code>
/*V√°ltoz√≥k*/
// kos√°r objektum
<span class="kodkiemeles">let kos√°r = {
    x: 0,
    y: M * 11,
    sz√©less√©g: M,
    magass√°g: M,
    sebess√©g: 350
}</span>
...
                </code>
            </pre>

            <p>Rajzoljuk ki a kosarat!</p>

            <pre>
                <code>
function rajzol√°s() {
    ...

    // kos√°r
    <span class="kodkiemeles">ctx.drawImage(kos√°rk√©p, kos√°r.x, kos√°r.y, kos√°r.sz√©less√©g, kos√°r.magass√°g);</span>

    ...
    
}
                </code>
            </pre>

            <p>Jelenleg az al√°bbi √°llapotot kell l√°tnunk a canvas-en.</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/szuret-kosar-kirajzolas.png">
                    <figcaption>A <span class="kodreszlet">kos√°r</span> l√©trehoz√°sa √©s kirajzol√°sa ut√°ni √°llapot</figcaption>
                </figure>
            </div>

            <div class="megjegyzes">

                <p><b>üí≠Megjegyz√©s</b></p>

                <h4>T√∂mb√∂k</h4>

                <p>Az eddigi projektekben m√°r haszn√°ltunk v√°ltoz√≥kat egy bizonyos √©rt√©k elt√°rol√°s√°ra, pl. pont, j√°t√©k stb. Azonban a v√°ltoz√≥k csak egyetlen √©rt√©k t√°rol√°s√°ra alkalmasak, pl. <span class="kodreszlet">5</span>, <span class="kodreszlet">true</span>, <span class="kodreszlet">"romlott"</span> stb. Hogyan tudunk nagyon sok adatot egy v√°ltoz√≥ban t√°rolni? P√©ld√°ul az √∂sszes lott√≥sz√°mot egy v√°ltoz√≥ban? <b>T√∂mb</b>√∂k haszn√°lat√°val.</p>

                <p>A t√∂mb√∂k olyan v√°ltoz√≥k, melyekben egyszerre t√∂bb adatot is tudunk t√°rolni. P√©ld√°ul a lott√≥sz√°mokat:</p>

                <pre>
                    <code>
let lottoszamok = [5, 12, 7, 40, 32];
                    </code>
                </pre>

                <p>A t√∂mb√∂ket a v√°ltoz√≥khoz hasonl√≥an a <span class="kodreszlet">let</span> kulcssz√≥val vezetj√ºk be, majd ezut√°n j√∂n a t√∂mb neve (<span class="kodreszlet">lottoszamok</span>). A t√∂mb nev√©t <span class="kodreszlet">=</span> jel k√∂veti, ut√°na <span class="kodreszlet">[ ]</span> jelek k√∂z√∂tt vessz≈ëvel elv√°lasztva felsoroljuk az adatokat. A sort <span class="kodreszlet">;</span>-vel z√°rjuk, b√°r ez nem k√∂telez≈ë.</p>

                <p>Ellen≈ërizz√ºk, hogy mi van a t√∂mbben √∫gy, hogy a t√∂mb√∂t ki√≠rjuk a console-ra.</p>

                <pre>
                    <code>
let lottoszamok = [5, 12, 7, 40, 32];
<span class="kodkiemeles">console.log(lottoszamok);</span>
                    </code>
                </pre>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras.png">
                        <figcaption>A <span class="kodreszlet">lottoszamok</span> t√∂mb ki√≠r√°sa a console-ra</figcaption>
                    </figure>
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-2.png">
                        <figcaption>A <span class="kodreszlet">lottoszamok</span> t√∂mb lenyitva a console-on</figcaption>
                    </figure>
                </div>

                <p>Az ut√≥bbi k√©pen az is l√°that√≥, hogy az egyes sz√°mokhoz (t√∂mbelemkhez) milyen sorsz√°m (index) tartozik. A t√∂mb els≈ë elem√©nek az indexe <span class="kodreszlet">0</span>, a m√°sodik elem√© <span class="kodreszlet">1</span> stb., az utols√≥ elem√© <span class="kodreszlet">4</span>. A t√∂mb hossz√°t is l√°thatjuk: <span class="kodreszlet">length: 5</span>.</p>

                <p>A t√∂mb√∂kben <b>m√°s adatt√≠pust</b> is t√°rolhatunk: sz√∂veget, logikai √©rt√©ket, val√≥s sz√°mokat vagy t√∂m√∂ket:</p>

                <pre>
                    <code>
let lottoszamok = [5, 12, 7, 40, 32];
console.log(lottoszamok);

<span class="kodkiemeles">let vegyes = ['Anna', 'Alad√°r', true, 0, 12.7543, false, [0, 1, 2, 3, 4]]
console.log(vegyes);</span>
                    </code>
                </pre>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-vegyes.png">
                        <figcaption>A <span class="kodreszlet">vegyes</span> t√∂mb ki√≠rva √©s lenyitva a console-on</figcaption>
                    </figure>
                </div>

                <p>Most ne az eg√©sz <span class="kodreszlet">vegyes</span> t√∂mb√∂t √≠rjuk ki, hanem csak az <span class="kodreszlet">1</span>. indexen l√©v≈ë elem√©t, majd a <span class="kodreszlet">2</span>. indexen l√©v≈ë elem√©t!</p>

                <pre>
                    <code>
let vegyes = ['Anna', 'Alad√°r', true, 0, 12.7543, false, [0, 1, 2, 3, 4]]
console.log(vegyes);

<span class="kodkiemeles">console.log(vegyes[1]);
console.log(vegyes[2]);</span>
                    </code>
                </pre>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-elso-es-masodik-elem.png">
                        <figcaption>A <span class="kodreszlet">vegyes</span> t√∂mb els≈ë √©s m√°sodik indexen l√©v≈ë elem√©nek ki√≠r√°sa</figcaption>
                    </figure>
                </div>

                <p class="feladat"><b>‚úÖFeladat</b><br>Hozd l√©tre azt a t√∂mb√∂t, melynek megjelen√©se a console-on az al√°bbi! √çrd ki ennek a t√∂mbnek a <span class="kodreszlet">3</span>. indexen l√©v≈ë elem√©t!</p>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-feladat.png">
                        <figcaption>Az <span class="kodreszlet">adatok</span> t√∂mb ki√≠rva √©s lenyitva a console-on</figcaption>
                    </figure>
                </div>

                <details>
                    <summary>Megold√°s</summary>
                    <pre>
                        <code>
let adatok = ['Alfr√©d', true, 1.23456789, [9, 8, 7, 6]]
console.log(adatok);
console.log(adatok[3]);
                        </code>
                    </pre>
                </details>

                <p>A t√∂mb√∂kben ak√°r <b>objektumokat</b> is t√°rolhatunk:</p>

                <pre>
                    <code>
let szereplok = [
    <span class="kodkiemeles">{x: 10, y: 10, sz√©less√©g: 40, magass√°g: 40},
    {x: 20, y: 10, sz√©less√©g: 40, magass√°g: 40},
    {x: 30, y: 10, sz√©less√©g: 40, magass√°g: 40}</span>
]
console.log(szereplok);
                    </code>
                </pre>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-objektum.png">
                        <figcaption>A <span class="kodreszlet">szereplok</span> t√∂mbben h√°rom t√©glalapszer≈± objektum van 4 tulajdons√°ggal: <span class="kodreszlet">x</span>, <span class="kodreszlet">y</span>, <span class="kodreszlet">sz√©less√©g</span> √©s <span class="kodreszlet">magass√°g</span></figcaption>
                    </figure>
                </div>

            </div>

            <h4>A <span class="kodreszlet">kos√°r</span> mozgat√°sa</h4>

            <p>A Szent Mih√°ly napi terel√©s j√°t√©kban tapasztalhattuk azt a felhaszn√°l√≥i √©lm√©nyt rombol√≥ jelens√©get, hogy a jobbra ny√≠l lenyom√°sakor √©s <b>nyomva tart√°sakor</b> a juh l√©p egyet, megtorpan egy pillanatra, majd folyamatosan mozog jobbra. Ezt a megtorpan√°st fogjuk kik√ºsz√∂b√∂lni azzal, hogy az √©ppen lenyomott billenty≈±t beletessz√ºk az √©ppen lenyomva tartott billenyt≈±ket tartalmaz√≥ t√∂mbbe, √©s a mozg√°st ennek a t√∂mbnek a tartalma alapj√°n fogjuk v√©gezni. Vagyis, ha az <span class="kodreszlet">"ArrowRight"</span> billenty≈± √©rt√©ke <span class="kodreszlet">true</span> (teh√°t lenyomtuk), akkor mozogjon jobbra a <span class="kodreszlet">kos√°r</span>.</p>

            <p>Hozzuk l√©tre a <span class="kodreszlet">billenty≈±k</span> nev≈± t√∂mb√∂t:</p>

            <pre>
                <code>
// egy√©b v√°ltoz√≥k
 // az √©ppen hull√≥ alm√°kat t√°rol√≥ t√∂mb
<span class="kodkiemeles">let billenty≈±k = [];</span> // az √©ppen lenyomva tartott billenty≈±ket tarol√≥ t√∂mb
let almasebess√©g = 50; // alm√°k sebess√©ge
let almagyakoris√°g = 100; // h√°ny px legyen k√©t alma k√∂z√∂tt, mennyivel ut√°na j√∂jj√∂n a k√∂vetkez≈ë
let v√©ge = false; // v√©ge van-e a j√°t√©knak
let db = 0; // begy≈±jt√∂tt alm√°k sz√°ma
                </code>
            </pre>

            <p>Kezelj√ºk le a <b>gomblenyom√°s</b>, valamint a <b>gombfelenged√©s</b> esem√©nyt:</p>

            <pre>
                <code>
/* === ESEM√âNYEK === */

// lenyomott billenty≈±k elt√°rol√°sa
<span class="kodkiemeles">document.addEventListener('keydown', e => {
    billenty≈±k[e.key] = true;
})

document.addEventListener('keyup', e => {
    billenty≈±k[e.key] = false;
})</span>
                </code>
            </pre>

            <p>A t√∂mb tartalma alapj√°n mozgassuk a <span class="kodreszlet">kos√°r</span> szerepl≈ët √∫gy, hogy az <b>ne mehessen ki a j√°t√©kt√©rr≈ël</b> egyik oldalon sem:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    // kos√°r ir√°ny√≠t√°sa
    <span class="kodkiemeles">if(billenty≈±k['ArrowRight']) {
        if(kos√°r.x &lt; canvas.width - kos√°r.sz√©less√©g) {
            kos√°r.x += kos√°r.sebess√©g * dt;
        }
    }
    if(billenty≈±k['ArrowLeft']) {
        if(kos√°r.x > 0) {
            kos√°r.x -= kos√°r.sebess√©g * dt;
        }
    }</span>

    // √∫j alma
    

    // alm√°k mozg√°sa √©s t√∂rl√©se
    

    // j√°t√©k v√©ge
    
}
                </code>
            </pre>

            <p><b>Most m√°r tudjuk mozgatni a kosarat,</b> de m√©g nincs mit elkapni.</p>

            <h4>Alm√°k</h4>

            <p>Az alm√°k a j√°t√©kt√©r <b>tetej√©n</b> jelennek meg v√≠zszintesen <b>v√©letlen helyen</b>, majd azonnal <b>elindulnak</b> egyenletes sebess√©ggel lefel√©. Minden alma egy k√ºl√∂n objektum (t√©glalap), melyeket az <span class="kodreszlet">alm√°k</span> t√∂mbben fogunk t√°rolni. Mivel nagyon sok alma gener√°l√≥dik a j√°t√©kban, ezeket nem fogjuk manu√°lisan a j√°t√©k elej√©n egyes√©vel l√©trehozni, hanem egy f√ºggv√©ny seg√≠ts√©g√©vel gener√°ljuk le ≈ëket √©s tessz√ºk bele az <span class="kodreszlet">alm√°k</span> t√∂mbbe. Hozzuk l√©tre ezt a t√∂mb√∂t!</p>

            <pre>
                <code>
// egy√©b v√°ltoz√≥k
<span class="kodkiemeles">let alm√°k = [];</span> // az √©ppen hull√≥ alm√°kat t√°rol√≥ t√∂mb
let billenty≈±k = []; // az √©ppen lenyomva tartott billenty≈±ket tarol√≥ t√∂mb
let almasebess√©g = 50; // alm√°k sebess√©ge
let almagyakoris√°g = 100; // h√°ny px legyen k√©t alma k√∂z√∂tt, mennyivel ut√°na j√∂jj√∂n a k√∂vetkez≈ë
let v√©ge = false; // v√©ge van-e a j√°t√©knak
let db = 0; // begy≈±jt√∂tt alm√°k sz√°ma
                </code>
            </pre>

            <p>√çrjuk meg az alm√°kat gener√°l√≥ f√ºggv√©nyt! Ehhez tudnunk kell, hogy mit kell t√°rolnunk minden alm√°r√≥l. Mivel t√©glalap alak√∫ objektumokk√©nt fogjuk t√°rolni ≈ëket, ez√©rt sz√ºks√©g√ºnk lesz az <span class="kodreszlet">x</span>, <span class="kodreszlet">y</span>, <span class="kodreszlet">sz√©less√©g</span> √©s <span class="kodreszlet">magass√°g</span> tulajdons√°gokra, de tudnunk kell azt is, hogy az adott alma eg√©szs√©ges-e vagy sem (romlott). Ez lesz az alma <span class="kodreszlet">t√≠pus</span> tulajdons√°ga. Teh√°t ezt az 5 dolgot fogjuk elt√°rolni minden alm√°r√≥l. Ezekkel a tulajdons√°gokkal minden alma rendelkezik, azonban az egyes alm√°k eset√©n ezek a tulajdons√°gok m√°s-m√°s √©rt√©ket fognak felvenni. Gener√°ljunk le egy alm√°t a k√∂vetkez≈ë l√©p√©seket k√∂vetve:</p>

            <ol>
                <li>keress√ºnk neki egy v√©letlen v√≠zszintes helyet,</li>
                <li>sorsoljuk ki a t√≠pus√°t (eg√©szs√©ges vagy romlott),</li>
                <li>f≈±zz√ºk az alm√°t az <span class="kodreszlet">alm√°k</span> t√∂mb v√©g√©re a <span class="kodreszlet">.push()</span> paranccsal.</li>
            </ol>

            <pre>
                <code>
/* === SEG√âDF√úGGV√âNYEK === */

// √∫j alma f√ºggv√©ny
<span class="kodkiemeles">function √∫jAlma() {
    let vizszinteshely = v√©letlenEg√©sz(0, canvas.width - M / 2);
    let almat√≠pus = 0;
    if(v√©letlenEg√©sz(0, 10) &lt; 3) {
        almat√≠pus = 'romlott';
    } else {
        almat√≠pus = 'eg√©szs√©ges';
    }
    alm√°k.push({x: vizszinteshely, y: 0, sz√©less√©g: M / 2, magass√°g: M / 2, t√≠pus: almat√≠pus});
}</span>

// v√©letlen eg√©sz
...
                </code>
            </pre>

            <p>Pr√≥b√°ljuk ki ezt a f√ºggv√©nyt √©s gener√°ljunk le egy alm√°t az anim√°ci√≥s ciklus el≈ëtt az <span class="kodreszlet">√∫jAlma();</span> f√ºggv√©ny meg√≠v√°s√°val. Ebben a pillanatban beker√ºlt egy alma az <span class="kodreszlet">alm√°k</span> t√∂mbbe. √çrjuk ki a console-ra az <span class="kodreszlet">alm√°k</span> t√∂mb√∂t, hogy megbizonyosodjunk err≈ël!</p>

            <pre>
                <code>
// √∫j alma f√ºggv√©ny megh√≠v√°sa
<span class="kodkiemeles">√∫jAlma();
console.log(alm√°k);</span>

/* === ANIM√ÅCI√ìS CIKLUS === */
                </code>
            </pre>

            <p>Az al√°bbi k√©prsorozat h√°rom k√ºl√∂nb√∂z≈ë alma gener√°l√°s√°t mutatja, ami j√≥l szeml√©lteti, hogy az alma <span class="kodreszlet">x</span> √©s <span class="kodreszlet">t√≠pus</span> tulajdons√°gai <b>v√©letlenek</b>, m√≠g a <span class="kodreszlet">sz√©less√©g</span>e, <span class="kodreszlet">magass√°g</span>a √©s <span class="kodreszlet">y</span> poz√≠ci√≥ja <b>√°lland√≥</b>.</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/szuret-tomb-kiiras-almak-1.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mb tartalma a console-on egy darab alma gener√°l√°sa ut√°n</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/szuret-tomb-kiiras-almak-2.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mb tartalma a console-on egy darab alma gener√°l√°sa ut√°n</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/szuret-tomb-kiiras-almak-3.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mb tartalma a console-on egy darab alma gener√°l√°sa ut√°n</figcaption>
                </figure>
            </div>

            <div class="megjegyzes">
                <p><b>üí≠Megjegyz√©s</b></p>
                <h4>T√∂mb√∂k bej√°r√°sa</h4>
                <p>T√©rj√ºnk vissza a lott√≥sz√°mokat tartalmaz√≥ t√∂mbre (<span class="kodreszlet">lottoszamok</span>). V√°laszoljuk meg a k√∂vetkez≈ë k√©rd√©st: kih√∫zt√°k-e a 7-es sz√°mot? Term√©szetesen, igen, l√°tjuk, hogy ez a t√∂mb 3. eleme. Honnan tudjuk? Vil√°gos, hogy ilyen kis m√©ret≈± t√∂mb eset√©n el√©g csak egy pillant√°st venni a t√∂mbre. De val√≥j√°ban a vizsg√°lat l√©p√©sei a k√∂vetkez≈ëk:</p>
                <ol>
                    <li>megn√©zz√ºk az els≈ë elemet, hogy egyenl≈ë-e 7-tel - nem</li>
                    <li>megn√©zz√ºk a m√°sodik elemet, hogy egyenl≈ë-e 7-tel - nem</li>
                    <li>√©s √≠gy tov√°bb, eg√©szen a t√∂mb v√©g√©ig.</li>
                </ol>
                <p>Mire a t√∂mb v√©g√©re √©r√ºnk, tudni fogjuk, hogy benne van-e a 7-es sz√°m. Az elemek egyes√©vel t√∂rt√©n≈ë vizsg√°lat√°t nevezz√ºk a <b>lista bej√°r√°s√°nak</b>. N√©zz√ºk meg, hogyan √≠rhatunk erre programot!</p>
                <p>A t√∂mb√∂kre alkalmazhat√≥ a <span class="kodreszlet">array.forEach(element => { });</span> szerkezet, amely megvizsg√°ja a t√∂mb √∂sszes elem√©t √©s v√©grehajtja rajtuk a <span class="kodreszlet">{ }</span> jelek k√∂z√∂tti r√©szt. A mi p√©ld√°nk alapj√°n a k√∂vetkez≈ët √≠rn√°nk:</p>

                <pre>
                    <code>
let lottoszamok = [5, 12, 7, 40, 32];
let van_e = false;
lottoszamok<span class="kodkiemeles">.forEach(szam => {</span>
    if (szam == 7) {
        van_e = true
    }
<span class="kodkiemeles">});</span>
if (van_e) {
    console.log('Van 7-es.');
}
                    </code>
                </pre>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/szuret-tomb-kiiras-foreach.png">
                        <figcaption>A <span class="kodreszlet">lottoszamok</span> lista bej√°r√°sa ut√°n a console-on megjelenik a "Van 7-es" sz√∂veg</figcaption>
                    </figure>
                </div>

            </div>

            <h4>Az alm√°k kirajzol√°sa</h4>

            <p>A <span class="kodreszlet">rajzol√°s()</span> f√ºggv√©nyben ki kell rajzolnunk az alm√°kat. Mindet. Vagyis be kell j√°rnunk az <span class="kodreszlet">alm√°k</span> t√∂mb√∂t, hogy minden elem√©n v√©gre tudjuk hajtani a kirajzol√°st. Viszont le kell kezeln√ºnk azt, hogy √©ppen eg√©szs√©ges vagy romlott alm√°val van-e dolgunk, mert ett≈ël f√ºgg, hogy a <b>piros</b> vagy a <b>fekete</b> alma k√©p√©t rajzoljuk-e ki:</p>

            <pre>
                <code>
function rajzol√°s() {
    // h√°tt√©r
    ...

    // talaj
    ...

    // almafa
    ...

    // felh≈ë
    ...

    // alm√°k
    <span class="kodkiemeles">alm√°k.forEach(alma => {
        if(alma.t√≠pus == 'romlott') {
            ctx.drawImage(romlottalmak√©p, alma.x, alma.y, alma.sz√©less√©g, alma.magass√°g);
        } else {
            ctx.drawImage(almak√©p, alma.x, alma.y, alma.sz√©less√©g, alma.magass√°g);
        }
    });</span>

    // kos√°r
    ctx.drawImage(kos√°rk√©p, kos√°r.x, kos√°r.y, kos√°r.sz√©less√©g, kos√°r.magass√°g);

    // begy≈±jt√∂tt alm√°k sz√°m√°nak ki√≠r√°sa
    
}
                </code>
            </pre>

            <p>A k√≥d meg√≠r√°sa ut√°n minden k√©perny≈ëfriss√≠t√©s ut√°n azt kell l√°tnunk, hogy megjelenik egy alma a k√©perny≈ë tetej√©n, v√©letlen helyen √©s v√©letlen "√°llapotban" (eg√©szs√©ges/romlott).</p>

            <h4>Alm√°k mozgat√°sa lefel√©</h4>

            <p>Az alm√°k mozgat√°s√°n√°l hasonl√≥ logik√°t kell k√∂vetn√ºnk, mint a kirajzol√°sukn√°l, mert a mozgat√°st minden k√©perny≈ëfriss√≠t√©sn√©l minden alm√°n el kell v√©gezn√ºnk, ez√©rt be kell j√°rnunk az <span class="kodreszlet">alm√°k</span> t√∂mb√∂t, √©s minden alma <span class="kodreszlet">y</span> poz√≠ci√≥j√°n n√∂velni kell egy kicsit. Az alm√°k sebess√©g√©t az <span class="kodreszlet">almasebess√©g</span> v√°ltoz√≥ hat√°rozza meg.</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    <span class="kodkiemeles">alm√°k.forEach(alma => {
        alma.y += almasebess√©g * dt;
    });</span>

    ...
    
}
                </code>
            </pre>

            <p>A k√≥d meg√≠r√°sa ut√°n elkezd leesni az az egy alma, ami benne van a t√∂mbben. Ezt mutatja az al√°bbi k√©psorozat:</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/szuret-alma-eses-kirajzolas-1.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mbben l√©v≈ë alm√°k lefel√© mozognak</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/szuret-alma-eses-kirajzolas-2.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mbben l√©v≈ë alm√°k lefel√© mozognak</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/szuret-alma-eses-kirajzolas-3.png">
                    <figcaption>Az <span class="kodreszlet">alm√°k</span> t√∂mbben l√©v≈ë alm√°k lefel√© mozognak</figcaption>
                </figure>
            </div>

            <p>Ezen a ponton a kosarat m√°r tudjuk ir√°ny√≠tani √©s az alm√°k m√°r hullanak, de m√©g nem tudjuk elkapni az alm√°t. K√∂vetkezzen ez a l√©p√©s!</p>

            <h4>Az alm√°k begy≈±jt√©se</h4>

            <p>Akkor tudunk alm√°t begy≈±jteni (√©s √≠gy pontot kapni), ha a kos√°r √©s <b>valamelyik</b> alma √°tfed√©sben van, m√°s sz√≥val √ºtk√∂znek. Fontos hangs√∫ly van azon, hogy <b>valamelyik alma</b>, mert a kos√°r b√°rmelyik alm√°val √ºtk√∂zhet. Vagyis ebben a feladatban is be kell j√°rnunk az alm√°kat tartalmaz√≥ t√∂mb√∂t, hogy minden alma eset√©n megvizsg√°lhassuk, hogy √ºtk√∂zik-e a kos√°rral. Ha igen, akkor k√©tf√©le eset van: vagy romlott alm√°t kaptunk el vagy eg√©szs√©geset. Ha romlott alm√°t kaptunk el, akkor a j√°t√©knak v√©ge, ez√©rt a <span class="kodreszlet">v√©ge</span> v√°ltoz√≥t <span class="kodreszlet">true</span>-ra kell √°ll√≠tani. Ha eg√©szs√©ges alm√°t kaptunk el, akkor t≈±nj√∂n el a k√©perny≈ër≈ël az adott alma, vagyis t√∂r√∂lj√ºk ki ≈ët a t√∂mbb≈ël. Mivel az √∫j alm√°kat k√©s≈ëbb a t√∂mb v√©g√©re fogjuk f≈±zni, ez√©rt a legalacsonyabban l√©v≈ë alma, amit val√≥sz√≠n≈±leg elkapunk, a t√∂mb legels≈ë, vagyis 0. index√©n l√©v≈ë eleme. Ez√©rt minden elkapott alma eset√©n a t√∂mb legels≈ë elem√©t (alm√°j√°t) kell t√∂r√∂lni. Mindez t√∂rt√©nhet az almamozgat√°ssal egy id≈ëben, teh√°t b≈±v√≠ts√ºk az alm√°k mozgat√°s√°t a k√∂vetkez≈ëk√©ppen:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    alm√°k.forEach(alma => {
        alma.y += almasebess√©g * dt;
        <span class="kodkiemeles">if(√ºtk√∂znek(alma, kos√°r)) {
            if(alma.t√≠pus == 'romlott') {
                v√©ge = true;
            } else {
                alm√°k.splice(0, 1);
                db += 1;
            }
        }</span>
    });

    ...
    
}
                </code>
            </pre>

            <p>A <span class="kodreszlet">.splice(0, 1)</span> azt jelenti, hogy a 0. indext≈ël kezd≈ëd≈ëen t√∂rl√ºnk 1 elemet. A <span class="kodreszlet">.splice(2, 2)</span> azt jelenti, hogy a 2. indext≈ël kezdve t√∂rl√ºnk 2 elemet. A <span class="kodreszlet">db</span> v√°ltoz√≥ban t√°roljuk az elkapott piros alm√°k sz√°m√°t. A romlott alm√°kat csak akkor t√∂r√∂lj√ºk a t√∂mbb≈ël, ha azok el√©rik a k√©perny≈ë alj√°t:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    alm√°k.forEach(alma => {
        alma.y += almasebess√©g * dt;
        if(√ºtk√∂znek(alma, kos√°r)) {
            if(alma.t√≠pus == 'romlott') {
                v√©ge = true;
            } else {
                alm√°k.splice(0, 1);
                db += 1;
            }
        }
        <span class="kodkiemeles">if(alma.t√≠pus == 'romlott' && alma.y + alma.magass√°g >= canvas.height) {
            alm√°k.splice(0, 1);
        }</span>
    });

    ...
}
                </code>
            </pre>

            <h4>A j√°t√©k v√©ge</h4>

            <p>A j√°t√©knak nemcsak akkor van v√©ge, amikor romlott alm√°t kapunk el, hanem akkor is, ha hagytunk leesni egy piros alm√°t:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    alm√°k.forEach(alma => {
        alma.y += almasebess√©g * dt;
        if(√ºtk√∂znek(alma, kos√°r)) {
            if(alma.t√≠pus == 'romlott') {
                v√©ge = true;
            } else {
                alm√°k.splice(0, 1);
                db += 1;
            }
        }
        if(alma.t√≠pus == 'romlott' && alma.y + alma.magass√°g >= canvas.height) {
            alm√°k.splice(0, 1);
        }
    });

    // j√°t√©k v√©ge
    <span class="kodkiemeles">alm√°k.forEach(alma => {
        if(alma.y > canvas.height && alma.t√≠pus == 'eg√©szs√©ges') {
            v√©ge = true;
        }
    });</span>
}
                </code>
            </pre>

            <p>Amikor a j√°t√©knak v√©ge, minden alma √°lljon meg ott, ahol √©ppen van. Vagyis csak akkor mozogjanak, ha a j√°t√©knak m√©g nincs v√©ge:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    <span class="kodkiemeles">if (!v√©ge) {</span>
        alm√°k.forEach(alma => {
            alma.y += almasebess√©g * dt;
            if(√ºtk√∂znek(alma, kos√°r)) {
                if(alma.t√≠pus == 'romlott') {
                    v√©ge = true;
                } else {
                    alm√°k.splice(0, 1);
                    db += 1;
                }
            }
            if(alma.t√≠pus == 'romlott' && alma.y + alma.magass√°g >= canvas.height) {
                alm√°k.splice(0, 1);
            }
        });
        <span class="kodkiemeles">}</span>

    // j√°t√©k v√©ge
    alm√°k.forEach(alma => {
        if(alma.y > canvas.height && alma.t√≠pus == 'eg√©szs√©ges') {
            v√©ge = true;
        }
    });
}
                </code>
            </pre>

            <h4>√öj alm√°k gener√°l√°sa</h4>

            <p>A j√°t√©k l√©nyege, hogy <b>t√∂bb alma</b> elkap√°s√°ra van lehet≈ës√©g√ºnk. Mivel m√°r l√©tezik az alm√°t l√©trehoz√≥ f√ºggv√©ny, csak √∫jra √©s √∫jra meg kell h√≠vni azt. A k√©rd√©s m√°r csak az, hogy mikor j√∂jj√∂n a k√∂vetkez≈ë alma? Erre t√∂bb v√°lasz is adhat√≥, a fejlesz≈ën m√∫lik. √ân most azt javaslom, hogy akkor j√∂jj√∂n a k√∂vetkez≈ë, amikor az el≈ëz≈ë alma m√°r legal√°bb 100 px-nyit (<span class="kodreszlet">almagyakoris√°g</span>nyit)ment lefel√©:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // √∫j alma
    <span class="kodkiemeles">if(alm√°k[alm√°k.length - 1].y &gt;= almagyakoris√°g && !v√©ge) {
        √∫jAlma();
    }</span>

    ...
}
                </code>
            </pre>

            <div class="megjegyzes">
                <p><b>üí≠Megjegyz√©s</b></p>
                <p>A <span class="kodreszlet">.length</span> paranccsal lek√©rdezhet≈ë egy t√∂mb hossza. Mivel minden t√∂mb utols√≥ elem√©nek indexe eggyel kevesebb, mint a t√∂mb hossza, ez√©rt <span class="kodreszlet">alm√°k[alm√°k.length - 1]</span>.</p>
            </div>

            <h4>Pontsz√°m ki√≠r√°sa</h4>

            <pre>
                <code>
function rajzol√°s() {
    ...

    // begy≈±jt√∂tt alm√°k sz√°m√°nak ki√≠r√°sa
    <span class="kodkiemeles">ctx.font = '20px Arial';
    ctx.fillStyle = 'black';
    ctx.fillText(db, 10, 30)</span>
}
                </code>
            </pre>

            <h4>Egyre gyakoribb alm√°k</h4>

            <p>Az  egyre gyakoribb alm√°k el√©r√©s√©hez csak az <span class="kodreszlet">almagyakoris√°g</span> v√°ltoz√≥ √©rt√©k√©t kell cs√∂kkenteni. Ennek mink√©ntje szint√©n a fejleszt≈ë preferenci√°ira van b√≠zva. √ân most azt javaslom, hogy minden elkapott alma ut√°n cs√∂kkents√ºk ennek √©rt√©k√©t 5-tel, de 50 px-n√©l kevesebb ne lehessen k√©t alma k√∂z√∂tt. Mivel az alm√°k mozgat√°s√°n bel√ºl vizsg√°ljuk az elkap√°st, √≠gy egy plusz felt√©tel hozz√°ad√°s√°val itt kezelni tudjuk a gyakoris√°got.</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    ...

    // alm√°k mozg√°sa √©s t√∂rl√©se
    if (!v√©ge) {
        alm√°k.forEach(alma => {
            alma.y += almasebess√©g * dt;
            if(√ºtk√∂znek(alma, kos√°r)) {
                if(alma.t√≠pus == 'romlott') {
                    v√©ge = true;
                } else {
                    alm√°k.splice(0, 1);
                    db += 1;
                    <span class="kodkiemeles">if(almagyakoris√°g > 50) {
                        almagyakoris√°g -= 5;
                    }</span>
                }
            }
            if(alma.t√≠pus == 'romlott' && alma.y + alma.magass√°g >= canvas.height) {
                alm√°k.splice(0, 1);
            }
        });
    }

    ...
}
                </code>
            </pre>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/szuret-kesz.png">
                    <figcaption>A k√©sz j√°t√©k, <span class="kodreszlet">almagyakoris√°g = 50</span></figcaption>
                </figure>
            </div>

            <p>A j√°t√©k <b>elk√©sz√ºlt</b>, j√≥ almasz√ºretel√©st! üçé</p>

            <div  class="feladatextra">
                <p><b>‚ú®EXTRA Feladat</b></p>
                <p>Legyenek z√∂ld alm√°k is üçè, melyek begy≈±jt√©se <b>2</b> pontot √©rjen!</p>
            </div>

        </div>

    </main>

    <footer>

    </footer>
</body>
</html>