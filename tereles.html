<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="anyag.css" title="normal">
    <!--<link rel="alternate stylesheet" type="text/css" href="nagybetus.css" title="nagybetus">-->
    <link rel="icon" type="image" href="k√©pek/favicon-curly-bracket.png">
    <title>Szent Mih√°ly napi terel√©s - Webes j√°t√©kok szakk√∂r</title>
</head>
<body>
    <header>
        <ul>
            <li><a href="index.html">Kezd≈ëlap</a></li>
            <li>Forr√°sok</li>
            <li>√ìrav√°zlatok</li>
            <li>R√≥lunk</li>
        </ul>
    </header>

    <main>
        <div class="cim">
            <div>
                <p><span></span>Szakk√∂ri seg√©danyag</p>
                <h1>Szent Mih√°ly napi terel√©s üêë</h1>
            </div>
        </div>
        
        <div class="anyag">
            <h2>√Åttekint√©s</h2>

            <div class="informacio-ido">
                <figure>
                    <img src="k√©pek/√≥ra.png">
                </figure>
                <p>45'</p>
            </div>
            <div class="informacio-szint">
                <figure>
                    <img src="k√©pek/csillag.png">
                </figure>
                <p>k√∂zepes</p>
            </div>

            <h3>A j√°t√©k c√©lja</h3>
            <p>Szeptember 29. Szent Mih√°ly napja. A hagyom√°ny szerint ezen a napon hajtj√°k be a legel≈ër≈ël az √°llatokat haza, a t√©li sz√°ll√°shelyre. Id≈ëj√°r√°sj√≥sl√≥ napnak is tartott√°k, mert ha Mih√°ly itt tal√°lja a fecsk√©ket, akkor kellemes meleg ≈ësz v√°rhat√≥. A p√°sztorok az √°llatok viselked√©s√©b≈ël j√≥soltak az id≈ëj√°r√°sra.</p>
            <p>Ebben a feladatban <b>3 juhot kell beterelni a t√©li sz√°ll√°shelyre</b>. Akkor sikeres a terel√©s, ha <b>mindh√°rom</b> juh a h√°z el≈ëtt van (√ºtk√∂znek vele). Ebben a pillanatban <b>√°lljon meg mindegyik</b> √°llat.</p>
            
            <a href="6 Szent Mih√°ly napi terel√©s/index.html">
                <div class="megtekintes-gomb">
                    <p>Interakt√≠v p√©lda</p>
                </div>
            </a>

        </div>

        <div class="utmutato">
            <h2>√ötmutat√≥</h2>
            <p>Az √∫tmutat√≥ a <a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> fejleszt≈ëi k√∂rnyezethez k√©sz√ºlt.</p>
            <h3>HTML</h3>

            <p>Induljunk ki a m√°r j√≥l ismert HTML alapstrukt√∫r√°b√≥l! A j√°t√©kt√©r legyen 600px sz√©les √©s 400px magas! Ha szeretn√©nk, a canvasnek adhatunk egy v√©kony keretet.</p>

            <pre>
                <code>
&lt;!DOCTYPE html&gt;
&lt;html lang="hu"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Szent Mih√°ly napi terel√©s&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;style&gt;
        canvas{
            border: 1px solid black;
        }
    &lt;/style&gt;
    &lt;h1&gt;Szent Mih√°ly napi terel√©s&lt;/h1&gt;
    &lt;canvas width="600" height="400" id="vaszon"&gt;&lt;/canvas&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
                </code>
            </pre>

            <h3>JavaScript</h3>

            <h4>Kiindul√°s</h4>
            
            <p>A JS-k√≥d <b>keretprogramja</b> al√°bb l√°that√≥, melyben a canvas el√©r√©se, az anim√°ci√≥s ciklus, a h√°tt√©r kirajzol√°sa, √©s az <b>√ºtk√∂z√©s</b> seg√©df√ºggv√©ny, valamint egy√©b kommentek ker√ºltek elhelyez√©sre.</p>
            <pre>
                <code>
/* Canvas el√©r√©se */
const canvas = document.querySelector('canvas');
const ctx = canvas.getContext('2d');

/* === √ÅLLAPOTT√âR === */

/*Konstansok*/
// juhok m√©rete

/*K√©p*/


/*V√°ltoz√≥k (objektumok)*/
// az 1. juh adatai


// az 2. juh adatai


// az 3. juh adatai


// a h√°z adatai


/* === ID≈êALAP√ö ANIM√ÅCI√ìS CIKLUS === */


function k√∂vetkez≈ë() {
    friss√≠t√©s();
    rajzol√°s();
    requestAnimationFrame(k√∂vetkez≈ë);
}

k√∂vetkez≈ë(); // az anim√°ci√≥ elind√≠t√°sa

function rajzol√°s() {
    // h√°tt√©r
    ctx.fillStyle = 'lightblue';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // talaj
    

    // h√°z alapja
    

    // h√°ztet≈ë
    

    // h√°z ajtaja
    

    // juh1
    

    // juh2
    

    // juh3
    
}

function friss√≠t√©s() {
    
}

/* === ESEM√âNYEK === */



/* === SEG√âDF√úGGV√âNYEK === */

// √ºtk√∂z√©s
function √ºtk√∂znek(t√©glalap1, t√©glalap2) {
    return ! (
        t√©glalap2.x + t√©glalap2.sz√©less√©g &lt;= t√©glalap1.x ||
        t√©glalap2.y + t√©glalap2.magass√°g &lt;= t√©glalap1.y ||
        t√©glalap2.x >= t√©glalap1.x + t√©glalap1.sz√©less√©g ||
        t√©glalap2.y >= t√©glalap1.y + t√©glalap1.magass√°g
    )
}
                </code>
            </pre>

            <p class="feladat"><b>‚úÖFeladat</b><br>A talaj magass√°ga kb. hanyad r√©sze a j√°t√©kt√©r magass√°g√°nak? H√°ny px magas a talaj? A h√°z bal oldala hol helyezkedik el? A h√°z alja a talaj magass√°g√°hoz k√©pest milyen magasan helyezkedik el? A h√°zfal magass√°ga h√°nyszorosa a talaj magass√°g√°nak? A h√°zfal sz√©less√©ge h√°nyszorosa a talaj magass√°g√°nak? Milyen sz√©les a tet≈ë? Milyen sz√©les az ajt√≥? V√≠zszintesen hov√° van igaz√≠tva az ajt√≥ bal oldala?</p>

            <details>
                <summary>Megold√°s</summary>
                <ol>
                    <li><b>A talaj magass√°ga kb. hanyad r√©sze a j√°t√©kt√©r magass√°g√°nak?</b> A talaj a j√°t√©kt√©r magass√°g√°nak tized r√©sze.</li>
                    <li><b>H√°ny px magas a talaj?</b> 40px.</li>
                    <li><b>A h√°z bal oldala hol helyezkedik el?</b> V√≠zszintesen a j√°t√©kt√©r fel√©n√©l.</li>
                    <li><b>A h√°z alja a talaj magass√°g√°hoz k√©pest milyen magasan helyezkedik el?</b> A talaj magass√°g√°nak fel√©n√©l.</li>
                    <li><b>A h√°zfal magass√°ga h√°nyszorosa a talaj magass√°g√°nak?</b> 2,5.</li>
                    <li><b>A h√°zfal sz√©less√©ge h√°nyszorosa a talaj magass√°g√°nak?</b> 3.</li>
                    <li><b>Milyen sz√©les a tet≈ë?</b> A h√°z sz√©less√©g√©vel megegyez≈ë.</li>
                    <li><b>Milyen sz√©les az ajt√≥?</b> A talaj magass√°g√°val megegyez≈ë.</li>
                    <li><b>V√≠zszintesen hov√° van igaz√≠tva az ajt√≥ bal oldala?</b> A h√°zhoz k√©pest v√≠zszintesen k√∂z√©pre (360px).</li>
                </ol>
            </details>

            <p>L√°thatjuk teh√°t, hogy <b>minden a talaj magass√°g√°nak a t√∂bbsz√∂r√∂se vagy annak valahanyad r√©sze</b> - mindent ehhez igaz√≠tunk. Ez√©rt √©rdemes ezt az √©rt√©ket egy <b>konstans</b>ban elt√°rolni.</p>

            <pre>
                <code>
/* === √ÅLLAPOTT√âR === */

/*Konstansok*/
<span class="kodkiemeles">const M = 40;</span> // juhok m√©rete
                </code>
            </pre>

            <h4>Szerepl≈ëk</h4>

            <p>Sz√ºks√©g√ºnk lesz <b>szerepl≈ëkre</b>. Ezek a szerepl≈ëk id≈ënk√©nt vagy folyamatosan mozogni fognak valamilyen meghat√°rozott szab√°ly alapj√°n (juhok), ez√©rt a helyzet√ºket le√≠r√≥ adatokat √©rdemes <b>v√°ltoz√≥kban</b> elt√°rolni, hogy azok m√≥dos√≠t√°sa eset√©n a k√∂vetkez≈ë k√©pkocka a legfrissebb v√°ltozatot mutassa. Azonban a szerepl≈ëket nemcsak a mozg√°s miatt, hanem m√°s okokb√≥l is (pl. √ºtk√∂z√©s ellen≈ërz√©se) √©rdemes v√°ltoz√≥kkal le√≠rni. S≈ët! Az √∂sszetartoz√≥ adatokat √©rdemes <b>egys√©gbe z√°rni</b>.</p>

            <p>Mit jelent az <b>egys√©gbe z√°r√°s</b>? Azt, hogy bizonyos adatok csak egy konkr√©t szerepl≈ëh√∂z tartoznak. Vegy√ºk p√©ldak√©nt a haj√≥kat. Minden haj√≥nak van neve, ir√°nya √©s sebess√©ge (k√∂z√∂s tulajdons√°gok), de ezek az adatok minden haj√≥ eset√©n egyediek:</p>

            <ul>
                <li><b>Haj√≥n√©v:</b> K√©k Horizont</li>
                <li><b>Ir√°ny:</b> √âszaknyugat (315¬∞)</li>
                <li><b>Sebess√©g:</b> 18 csom√≥</li>
            </ul>
            <ul>
                <li><b>Haj√≥n√©v:</b> Sz√©lv√©sz</li>
                <li><b>Ir√°ny:</b> D√©lkelet (135¬∞)</li>
                <li><b>Sebess√©g:</b> 24 csom√≥</li>
            </ul>

            <p>JavaScriptben ezt a k√∂vetkez≈ëk√©ppen fogalmazzuk meg:</p>

            <pre>
                <code>
let hajo1 = {
    <span class="kodkiemeles">nev</span>: 'K√©k Horizont',
    <span class="kodkiemeles">irany</span>: 315,
    <span class="kodkiemeles">sebesseg</span>: 18
}

let hajo2 = {
    <span class="kodkiemeles">nev</span>: 'Sz√©lv√©sz',
    <span class="kodkiemeles">irany</span>: 135,
    <span class="kodkiemeles">sebesseg</span>: 24
}
                </code>
            </pre>

            <p>Ezeket az egys√©geket <b>objektum</b>oknak nevezz√ºk, a benn√ºk l√©v≈ë kulcs-√©rt√©k p√°rokat pedig <b>adattagoknak</b>. L√°tjuk, hogy t√∂bb azonos nev≈± adattag is van, de ez az√©rt nem okoz gondot, mert k√ºl√∂nb√∂z≈ë objektumokba vannak z√°rva.</p>

            <p>Teh√°t a <span class="kodreszlet">let</span> kulcssz√≥ ut√°n megadjuk az objektum nev√©t, majd az <span class="kodreszlet">=</span> jel ut√°n <span class="kodreszlet">{}</span> jelek k√∂z√∂tt felsoroljuk az adattagokat. Az adattagok egy kulcs-√©rt√©k p√°rb√≥l √°llnak, melyeket <span class="kodreszlet">:</span>-tal v√°lasztunk el. Az adattagokat vessz≈ëvel elv√°lasztva soroljuk fel.</p>

            <p>Ilyen objektumokra lesz sz√ºks√©g a juhok √©s a h√°z eset√©n is. Minden objektum a j√°t√©k egy szerepl≈ëje lesz, teh√°t l√©tre kell hoznunk a <b>juh1</b>, a <b>juh2</b> √©s a <b>juh3</b>, valamint a <b>h√°z</b> objektumokat. Minden szerepl≈ër≈ël tudnunk kell az ≈ë <span class="kodreszlet">x</span> √©s <span class="kodreszlet">y</span> poz√≠ci√≥j√°t, valamit a <span class="kodreszlet">sz√©less√©g</span>√©t √©s <span class="kodreszlet">magass√°g</span>√°t - t√∂bbek k√∂z√∂tt az √ºtk√∂z√©s vizsg√°lata miatt. N√©zz√ºk meg, hogy n√©z ki a juh1 l√©trehoz√°sa!</p>

            <pre>
                <code>
/*V√°ltoz√≥k (objektumok)*/
<span class="kodkiemeles">let juh1 = {    // az 1. juh adatai
    x: M,
    y: M * 8 + M / 2,
    sz√©less√©g: M,
    magass√°g: M,
}</span>
                </code>
            </pre>

            <p>Most import√°ljuk a juhot √°br√°zol√≥ k√©pet √©s rajzoljuk ki a <span class="kodreszlet">juh1</span> szerepl≈ët (objektumot)!</p>

            <pre>
                <code>
/* === √ÅLLAPOTT√âR === */

/*Konstansok*/
const M = 40; // juhok m√©rete

/*K√©p*/
<span class="kodkiemeles">let juhk√©p = new Image();
juhk√©p.src = 'juh.png';</span>
                </code>
            </pre>

            <pre>
                <code>
function rajzol√°s() {
    ...

    // juh1
    <span class="kodkiemeles">ctx.drawImage(juhk√©p, juh1.x, juh1.y, juh1.sz√©less√©g, juh1.magass√°g);</span>

    ...
}
                </code>
            </pre>

            <p>J√≥l l√°that√≥, hogy a <b>juh1</b> objektum kirajzol√°s√°n√°l nem konkr√©t adatokat √≠rtunk be, hanem valamilyen v√°ltoz√≥kra hivatkoztunk. Ezek a v√°ltoz√≥k a <span class="kodreszlet">juh1</span> objektum egy-egy adattagja, √∂sszetev≈ëje. Ezekre az adatokra √∫gy hivatkozhatunk, hogy az objektum neve ut√°n pontot √ºtve megadjuk az adattag nev√©t. Pl. a juh1 x adattagj√°ra √≠gy lehet hivatkozni: "<span class="kodreszlet">juh1.x</span>".</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/mihaly-objektumkirajzolas-juh1.png">
                    <figcaption>A juh1 kirajzol√°sa a <span class="kodreszlet">juh1</span> objektum alapj√°n</figcaption>
                </figure>
            </div>

            <p class="feladat"><b>‚úÖFeladat</b><br><b>Hozzuk l√©tre</b> a <span class="kodreszlet">juh2</span>, a <span class="kodreszlet">juh3</span> √©s a <span class="kodreszlet">h√°z</span> szerepl≈ëket is szorosan egym√°s mell√© helyezve:<br>juh2 v√≠zszintes helye: M * 2,<br>juh3 v√≠zszintes helye: M * 3,<br>h√°z v√≠zszintes helye: 300,<br>h√°z f√ºgg≈ëleges helye: canvas.height - M * 3,<br>h√°z sz√©less√©ge: M * 3,<br>h√°z magass√°ga: M * 2.5,<br><b>Rajzoljuk ki</b> ezeket a szerepl≈ëket, a talajt, a h√°ztet≈ët √©s az ajt√≥t!</p>

            <details>
                <summary>Megold√°s</summary>
                <p>A tov√°bbi h√°rom szerepl≈ë <b>l√©trehoz√°sa</b>:</p>
                <pre>
                    <code>
/*V√°ltoz√≥k (objektumok)*/
let juh1 = {    // az 1. juh adatai
    x: M,
    y: M * 8 + M / 2,
    sz√©less√©g: M,
    magass√°g: M,
}

<span class="kodkiemeles">let juh2 = {    // az 2. juh adatai
    x: M * 2,
    y: M * 8 + M / 2,
    sz√©less√©g: M,
    magass√°g: M,
}

let juh3 = {    // az 3. juh adatai
    x: M * 3,
    y: M * 8 + M / 2,
    sz√©less√©g: M,
    magass√°g: M,
}

let h√°z = {    // a h√°z adatai
    x: 300,
    y: canvas.height - M * 3,
    sz√©less√©g: M * 3,
    magass√°g: M * 2.5,
}</span>
                    </code>
                </pre>
                <p>A tov√°bbi szerepl≈ëk <b>kirajzol√°sa</b>:</p>
                <pre>
                    <code>
function rajzol√°s() {
    // h√°tt√©r
    ctx.fillStyle = 'lightblue';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // talaj
    <span class="kodkiemeles">ctx.fillStyle = 'green';
    ctx.fillRect(0, canvas.height - M, canvas.width, M);</span>

    // h√°z alapja
    <span class="kodkiemeles">ctx.fillStyle = 'beige';
    ctx.fillRect(h√°z.x, h√°z.y, h√°z.sz√©less√©g, h√°z.magass√°g);</span>

    // h√°ztet≈ë
    <span class="kodkiemeles">ctx.beginPath();
    ctx.moveTo(300, canvas.height - M * 3);
    ctx.lineTo(300 + M * 1.5, canvas.height - M * 3 * 2);
    ctx.lineTo(300 + M * 3, canvas.height - M * 3);
    ctx.closePath();
    ctx.stroke();
    ctx.fillStyle = 'brown';
    ctx.fill();</span>

    // h√°z ajtaja
    <span class="kodkiemeles">ctx.fillStyle = 'brown';
    ctx.fillRect(360, canvas.height - M * 2, M, M * 1.5);</span>

    // juh1
    ctx.drawImage(juhk√©p, juh1.x, juh1.y, juh1.sz√©less√©g, juh1.magass√°g);

    // juh2
    <span class="kodkiemeles">ctx.drawImage(juhk√©p, juh2.x, juh2.y, juh2.sz√©less√©g, juh2.magass√°g);</span>

    // juh3
    <span class="kodkiemeles">ctx.drawImage(juhk√©p, juh3.x, juh3.y, juh3.sz√©less√©g, juh3.magass√°g);</span>
}
                    </code>
                </pre>
            </details>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/mihaly-objektumkirajzolas-minden.png">
                    <figcaption>A szerepl≈ëk √©s alakzatok kirajzol√°sa az objektumok alapj√°n</figcaption>
                </figure>
            </div>

            <h4>Az id≈ëalap√∫ anim√°ci√≥s ciklus</h4>

            <p>Kor√°bban m√°r haszn√°ltuk az anim√°ci√≥s ciklust, amely rendelkez√©sre √°ll a kiindul√≥f√°jlban. M√°r tudjuk, hogy az anim√°ci√≥ nem m√°s, mint k√©pkock√°k (frame-ek) <b>egym√°sut√°ni gyors lej√°tsz√°sa</b>, ami a mozg√≥k√©p hat√°s√°t kelti. Ezzel a technol√≥gi√°val tal√°lkozhattok, amikor t√©v√©ztek, vide√≥t k√©sz√≠tetek a telefonotokkal vagy sz√°m√≠t√≥g√©pes j√°t√©kokkal j√°tszotok.</p>

            <p>El≈ëfordult m√°r veled, hogy egy pillanatra <b>megakadt</b> egy sz√°m√≠t√≥g√©pes j√°t√©k? Ez gyakran a g√©p teljes√≠tm√©ny√©re vagy (online j√°t√©kok eset√©n) a gyenge internetkapcsolatra vezethet≈ë vissza. Ezek el√©g bosszant√≥ak lehetnek, √©s b√°rkivel el≈ëfordulhatnak. A k√∂vetkez≈ë k√©t opci√≥ k√∂z√ºl te melyiket tapasztaltad:</p>

            <ol>
                <li>a j√°t√©k onnan folytat√≥dott, ahol megakadt (a mozg√≥ objektumok <b>nem mozdultak</b> a megakad√°s alatt)</li>
                <li>a j√°t√©k tov√°bb ment a h√°tt√©rben, √©s amikor √∫jra friss√ºlt a k√©p, akkor a mozg√≥ objektumok <b>az √∫j hely√ºk√∂n jelentek meg</b> (vagyis ott, ahol megakad√°s n√©lk√ºl is lettek volna)?</li>
            </ol>

            <p>J√°t√©kk√©sz√≠t≈ëk√©nt meg kell bizonyosodnunk r√≥la, hogy a j√°t√©k akkor is az aktu√°lis √°llapotot mutatja, ha a megakad√°s miatt nem friss√ºlne egy ideig a k√©p, vagyis ne engedj√ºk, hogy az internetsebess√©g vagy a g√©p√ºnk teljes√≠tm√©nye befoly√°solja a j√°t√©k sebess√©g√©t. Ehelyett a szerepl≈ëk poz√≠ci√≥j√°nak m√≥dos√≠t√°s√°hoz vegy√ºk alapul a k√©t k√©pkocka (k√©t friss√≠t√©s) k√∂z√∂tt eltelt id≈ët. Ezt nevezz√ºk <b>delta time</b>-nak, r√∂viden <b>dt</b>-nek. Ezt m√°sodpercben adjuk meg, a kisz√°m√≠t√°sa pedig √∫gy t√∂rt√©nik, hogy az aktu√°lis id≈ëb≈ël kivonjuk az el≈ëz≈ë id≈ët, majd ezt elosztjuk 1000-rel, hogy a k√©t k√©pkocka k√∂z√∂tt eltelt id≈ët m√°sodpercben kapjuk meg. Ehhez a j√°t√©k ind√≠t√°s√°nak idej√©t (amit a <span class="kodreszlet">performance.now()</span> paranccsal k√©rdezhet√ºnk le) elmentj√ºk az <span class="kodreszlet">el≈ëz≈ëId≈ë</span> nev≈± v√°ltoz√≥ba az anim√°ci√≥s ciklus ind√≠t√°sa <b>el≈ëtt</b>. A cikluson bel√ºl az aktu√°lis id≈ët elmentj√ºk az <span class="kodreszlet">aktu√°lisId≈ë</span> v√°ltoz√≥ba. A fenti sz√°m√≠t√°s eredm√©ny√©t beletessz√ºk a <span class="kodreszlet">dt</span> nev≈± v√°ltoz√≥ba, majd az <span class="kodreszlet">el≈ëz≈ëId≈ë</span>t egyenl≈ëv√© tessz√ºk az <span class="kodreszlet">aktu√°lisId≈ë</span>vel. A <span class="kodreszlet">dt</span>-t pedig param√©ter√ºl adjuk a <span class="kodreszlet">friss√≠t√©s(dt)</span> f√ºggv√©nynek, mivel erre az √©rt√©kre sz√ºks√©g√ºnk lesz a szerepl≈ëk mozgat√°s√°n√°l.</p>

            <p class="feladat"><b>‚úÖFeladat</b><br>Minden friss√≠t√©sn√©l √≠rjuk ki a j√°t√©k eleje √≥ta eltelt id≈ët!</p>

            <details>
                <summary>Megold√°s</summary>
                <pre>
                    <code>
/* === ANIM√ÅCI√ìS CIKLUS === */

function k√∂vetkez≈ë() {
    <span class="kodkiemeles">console.log(performance.now());</span>
    friss√≠t√©s()
    rajzol√°s()
    if (!v√©ge) {
        requestAnimationFrame(k√∂vetkez≈ë)
    }
}

k√∂vetkez≈ë()
                    </code>
                </pre>

                <p>Az al√°bbi k√©pen az l√°that√≥, hogy mennyi milliszekundum (ms) telt el a j√°t√©k elind√≠t√°sa √≥ta. <b>1000 ms = 1 mp</b></p>

                <div class="kepsor">
                    <figure>
                        <img src="k√©pek/pont-idoalapu-performancenowkiirasa.png">
                        <figcaption>A j√°t√©k elind√≠t√°sa √≥ta eltelt id≈ë ms-ban</figcaption>
                    </figure>
                </div>
            </details>

            <p>A <b>kib≈ëv√≠tett, id≈ëalap√∫ anim√°ci√≥s ciklus</b>, teh√°t, <b>a k√∂vetkez≈ëk√©ppen n√©z ki</b>:</p>

            <pre>
                <code>
/* === ID≈êALAP√ö ANIM√ÅCI√ìS CIKLUS === */

<span class="kodkiemeles">let el≈ëz≈ëId≈ë = performance.now();</span>
function k√∂vetkez≈ë() {
    <span class="kodkiemeles">let aktu√°lisId≈ë = performance.now();
    let dt = (aktu√°lisId≈ë - el≈ëz≈ëId≈ë) / 1000; // az el≈ëz≈ë k√©pkocka √≥ta eltelt id≈ë mp-ben
    el≈ëz≈ëId≈ë = aktu√°lisId≈ë;</span>
    friss√≠t√©s(<span class="kodkiemeles">dt</span>);
    rajzol√°s();
    requestAnimationFrame(k√∂vetkez≈ë);
}

k√∂vetkez≈ë(); // az anim√°ci√≥ elind√≠t√°sa

function rajzol√°s() {
    ...
}

function friss√≠t√©s(<span class="kodkiemeles">dt</span>) {
    
}
                </code>
            </pre>

            <h4>A juhok id≈ëalap√∫ mozgat√°sa</h4>

            <p>A kor√°bbi j√°t√©kokhoz √©s anim√°ci√≥khoz hasonl√≥an a mozgat√°st itt is a <span class="kodreszlet">friss√≠t√©s(dt)</span> f√ºggv√©nyben fogjuk meg√≠rni. Azonban a megold√°s kieg√©sz√ºl azzal, hogy az elmozdul√°s √©rt√©k√©t be kell szoroznunk a <span class="kodreszlet">dt</span>-vel annak √©rdek√©ben, hogy az esetleges "laggol√°s" eset√©n is folyamatos legyen a mozg√°s a h√°tt√©rben. A juhok mozogjanak k√ºl√∂nb√∂z≈ë sebess√©ggel!</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    <span class="kodkiemeles">juh1.x += 20 * dt;
    juh2.x += 22 * dt;
    juh3.x += 21 * dt;</span>
}
                </code>
            </pre>

            <h4>√útk√∂z√©s (szerepl≈ëk √©rintkez√©s√©nek) vizsg√°lata</h4>

            <p>A terel√©s akkor sikeres, ha minden juh a h√°z el≈ëtt van. A Scratch programoz√°si nyelvben m√°r tal√°lkozhattatok az <span class="kodreszlet">√©rinted: eg√©rmutat√≥?</span> paranccsal, amely igaz √©rt√©ket ad vissza, ha az adott szerepl≈ë √©rinti az eg√©rmutat√≥t (vagy b√°rmely m√°s kiv√°lasztott szerepl≈ët).</p>
            
            <p>Ehhez hasonl√≥an m≈±k√∂dik a kiindul√≥f√°jlban meg√≠rt <span class="kodreszlet">√ºtk√∂znek(t√©glalap1, t√©glalap2)</span> f√ºggv√©ny. L√°tjuk, hogy a f√ºggv√©ny csak t√©glalapok √ºtk√∂z√©s√©t (√©rintkez√©s√©t) tudja vizsg√°lni, <b>ez√©rt volt fontos az objektumokat a t√©glalap tulajdons√°gaival le√≠rni</b> (balFels≈ëX, balFels≈ëY, sz√©less√©g, magass√°g). A f√ºggv√©ny val√≥j√°ban k√©t t√©glalap √°tfed√©s√©t ellen≈ërzi v√≠zszintesen √©s f√ºgg≈ëlegesen. Ez a f√ºggv√©ny <span class="kodreszlet">igaz</span> √©rt√©ket fog visszaadni, ha a <span class="kodreszlet">t√©glalap1</span> √©s a <span class="kodreszlet">t√©glalap2</span> objektumok kicsit is √°tfedik egym√°st (√ºtk√∂znek), ez√©rt j√≥l haszn√°lhat√≥ <b>el√°gaz√°sok felt√©telek√©nt</b> (ha t1 √©s t2 √ºtk√∂znek, akkor...).</p>

            <p><b>Most m√°r van eszk√∂z a kez√ºnkben szerepl≈ëk √©rintkez√©s√©nek vizsg√°lat√°ra.</b></p>

            <pre>
                <code>
/* === SEG√âDF√úGGV√âNYEK === */

// √ºtk√∂z√©s
function √ºtk√∂znek(t√©glalap1, t√©glalap2) {
    return ! (
        t√©glalap2.<span class="kodkiemeles">x</span> + t√©glalap2.<span class="kodkiemeles">sz√©less√©g</span> &lt;= t√©glalap1.<span class="kodkiemeles">x</span> ||
        t√©glalap2.<span class="kodkiemeles">y</span> + t√©glalap2.<span class="kodkiemeles">magass√°g</span> &lt;= t√©glalap1.<span class="kodkiemeles">y</span> ||
        t√©glalap2.<span class="kodkiemeles">x</span> >= t√©glalap1.<span class="kodkiemeles">x</span> + t√©glalap1.<span class="kodkiemeles">sz√©less√©g</span> ||
        t√©glalap2.<span class="kodkiemeles">y</span> >= t√©glalap1.<span class="kodkiemeles">y</span> + t√©glalap1.<span class="kodkiemeles">magass√°g</span>
    )
}
                </code>
            </pre>

            <h4>Terel√©s v√©ge</h4>

            <p>A terel√©s akkor sikeres, ha mindegyik juh a h√°z el≈ëtt van (=√ºtk√∂zik a h√°zzal). Ekkor legyen v√©ge az anim√°ci√≥nak, √°lljon meg minden juh! M√°s sz√≥val ne friss√≠ts√ºk tov√°bb a k√©perny≈ët, teh√°t a <span class="kodreszlet">requestAnimationFrame(k√∂vetkez≈ë);</span>-nek fogalmazzunk meg egy felt√©telt: akkor friss√≠tse a k√©perny≈ët, ha a h√°z m√©g egyik juhval sem √ºtk√∂zik. Sejthet≈ë, hogy az <span class="kodreszlet">√ºtk√∂znek(t√©glalap1, t√©glalap2)</span> f√ºggv√©nyre lesz sz√ºks√©g√ºnk, de pont az ellenkez≈ë jelent√©s√©re. A tagad√°st a <span class="kodreszlet">!</span> jellel tudjuk kifejezni. A <span class="kodreszlet">!√ºtk√∂znek(juh1,h√°z)</span> jelent√©se "a juh1 √©s a h√°z <b>nem</b> √ºtk√∂znek". Ezt mindh√°rom juh eset√©n vizsg√°lni kell, a felt√©teleket VAGY (<span class="kodreszlet">||</span>) logikai m≈±velettel elv√°lasztva.</p>

            <pre>
                <code>
/* === ID≈êALAP√ö ANIM√ÅCI√ìS CIKLUS === */

let el≈ëz≈ëId≈ë = performance.now();
function k√∂vetkez≈ë() {
    let aktu√°lisId≈ë = performance.now();
    let dt = (aktu√°lisId≈ë - el≈ëz≈ëId≈ë) / 1000; // az el≈ëz≈ë k√©pkocka √≥ta eltelt id≈ë mp-ben
    el≈ëz≈ëId≈ë = aktu√°lisId≈ë;
    friss√≠t√©s(dt);
    rajzol√°s();
    // ha van olyan, amelyik m√©g nincs a h√°z el≈ëtt, akkor mehet tov√°bb az anim√°ci√≥
    <span class="kodkiemeles">if(!√ºtk√∂znek(juh1,h√°z) || !√ºtk√∂znek(juh2,h√°z) || !√ºtk√∂znek(juh3,h√°z)) {</span>
        requestAnimationFrame(k√∂vetkez≈ë);
    <span class="kodkiemeles">}</span>
}

k√∂vetkez≈ë(); // az anim√°ci√≥ elind√≠t√°sa
                </code>
            </pre>

            <h4>Anim√°ci√≥b√≥l j√°t√©k</h4>

            <p>Oldjuk meg, hogy az egyik juhot <b>a nyilakkal lehessen ir√°ny√≠tani</b>!</p>

            <p>A rajzol√≥s projektb≈ël m√°r ismerj√ºk az eg√©rmozgat√°s (<span class="kodreszlet">'mousemove'</span>) t√≠pus√∫ esem√©nyt, a Pont nev≈± j√°t√©kb√≥l pedig a kattint√°s (<span class="kodreszlet">'click'</span>) esem√©nyt. Most ismerkedj√ºnk meg a billenty≈±lenyom√°st figyel≈ë esem√©nnyel! Ehhez a <span class="kodreszlet">keydown</span> t√≠pust kell az esem√©nyfigyel≈ë param√©terek√©nt megadni. Ha a kiv√°ltott esem√©ny (<span class="kodreszlet">e</span>) billenty≈±je (<span class="kodreszlet">.key</span>) <span class="kodreszlet">"ArrowRight"</span>, akkor a <span class="kodreszlet">juh1</span> v√≠zszintes poz√≠ci√≥j√°t n√∂velj√ºk meg 1-gyel. (Itt sajnos nem tudjuk haszn√°lni a <span class="kodreszlet">dt</span>-t, mert azt az anim√°ci√≥s ciklusban hoztuk l√©tre √©s csak a <span class="kodreszlet">friss√≠t√©s(dt)</span> f√ºggv√©nynek adtuk √°t.) Ha szeretn√©nk, a console-ra ki√≠rhatjuk a lenyomott billenty≈± nev√©t.</p>

            <pre>
                <code>
/* === ESEM√âNYEK === */

<span class="kodkiemeles">document.addEventListener('keydown', e => {
    if (e.key == "ArrowRight") {
        console.log(e.key);
        juh1.x += 1;
    }
})</span>
                </code>
            </pre>

            <p>Most m√°r nem kell automatikusan mozgatnunk a <span class="kodreszlet">juh1</span> szerepl≈ët, √≠gy ezt a sort kommentelj√ºk vagy t√∂r√∂lj√ºk ki!</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    <span class="kodkiemeles">//</span>juh1.x += 20 * dt;
    juh2.x += 22 * dt;
    juh3.x += 21 * dt;
}
                </code>
            </pre>

            <div  class="feladatextra">
                <p><b>‚ú®EXTRA Feladatok</b></p>
                <p>‚¨ÖÔ∏è A <span class="kodreszlet">juh1</span> szerepl≈ët balra is lehessen mozgatni a balra ny√≠llal.</p>
                <p>üê¶ Am√≠g a juhok a h√°z fel√© tartanak, addig rep√ºlj√∂n be egy fecske a jobb oldalr√≥l (a j√°t√©kt√©ren k√≠v√ºlr≈ël)! A fecsk√©t k√ºl√∂n objektumk√©nt hozd l√©tre, √©s egy fecske k√©pe jelenjen meg a juhok m√©ret√©vel megegyez≈ë m√©retben! K√©peket a <a href="https://www.flaticon.com/" target="_blank">flaticon.com</a> oldalon kereshetsz a "swallow" kulcssz√≥val.</p>
            </div>
            

        </div>

    </main>

    <footer>
        <div>
            <p><b>K√©sz√≠tette</b>: Csom√≥s B√°lint</p>
            <p><b>Neptun k√≥d</b>: C1224B</p>
            <p><b>Kapcsolat</b>: csomosbalint@student.elte.hu</p>
            <p><b>T√©mavezet≈ë</b>: Dr Bern√°t P√©ter</p>
            <p><b>K√©sz√ºlt</b>: 2024-2025</p>
        </div>
        
        <div>
            <figure>
                <img src="k√©pek/elte_ik_fekvo_hosszu_logo_rgb_feher-01.png">
            </figure>
        </div>
    </footer>
</body>
</html>