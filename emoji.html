<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="anyag.css" title="normal">
    <!--<link rel="alternate stylesheet" type="text/css" href="nagybetus.css" title="nagybetus">-->
    <link rel="icon" type="image" href="k√©pek/favicon-curly-bracket.png">
    <title>Emoji Pong - Webes j√°t√©kok szakk√∂r</title>
</head>
<body>
    <header>
        <ul>
            <li><a href="index.html">Kezd≈ëlap</a></li>
            <li>Forr√°sok</li>
            <li>√ìrav√°zlatok</li>
            <li>R√≥lunk</li>
        </ul>
    </header>

    <main>
        <div class="cim">
            <div>
                <p><span></span>Szakk√∂ri seg√©danyag</p>
                <h1>Emoji Pong üòé</h1>
            </div>
        </div>
        
        <div class="anyag">
            <h2>√Åttekint√©s</h2>

            <div class="informacio-ido">
                <figure>
                    <img src="k√©pek/√≥ra.png">
                </figure>
                <p>90'</p>
            </div>
            <div class="informacio-szint">
                <figure>
                    <img src="k√©pek/csillag.png">
                </figure>
                <p>neh√©z</p>
            </div>

            <h3>A j√°t√©k c√©lja</h3>
            <p>Tudtad, hogy ha r√°koppintasz az Instagramon&reg; egy √ºzenetben elk√ºld√∂tt emojira, akkor elindul egy j√°t√©k? Ma ezt <b>Pong-t√≠pus√∫ j√°t√©kot</b> k√©sz√≠theted el.</p>
            
            <a href="7 Emoji Pong/index.html">
                <div class="megtekintes-gomb">
                    <p>Interakt√≠v p√©lda</p>
                </div>
            </a>

        </div>

        <div class="utmutato">
            <h2>√ötmutat√≥</h2>
            <p>Az √∫tmutat√≥ a <a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> fejleszt≈ëi k√∂rnyezethez k√©sz√ºlt.</p>
            
            <h3>HTML</h3>

            <p>Induljunk ki a m√°r j√≥l ismert alapstrukt√∫r√°b√≥l, azonban a canvas sz√©less√©g√©t √©s magass√°g√°t √∫gy hat√°rozzuk meg, hogy egy <b>keskeny f√ºgg≈ëleges alakzat</b>ot kapjunk, ami hasonl√≠t egy mobiltelefon kijelz≈ëj√©re!</p>

            <p class="feladat">L√°togass el a <a href="https://viewportsizer.com/" target="_blank">viewportsizer.com</a> oldalra, √©s tekintsd meg az aktu√°lis eszk√∂z√∂d <b>kijelz≈ëj√©nek m√©ret√©t</b>!<br>L√©pj √°t a <b>Devices</b> men√ºpontra, hogy felfedezd az egy√©b eszk√∂z√∂k kijelz≈ëm√©ret√©t!</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/pont-viewportsizer.png">
                    <figcaption>Az aktu√°lis eszk√∂zm√©ret</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/pont-viewportsizer-devices.png">
                    <figcaption>K√ºl√∂nb√∂z≈ë eszk√∂z√∂k kijelz≈ëj√©nek sz√©less√©ge √©s magass√°ga</figcaption>
                </figure>
            </div>

            <pre>
                <code>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Emoji Pong&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;style&gt;
        canvas{
            border: 1px solid black;
        }
    &lt;/style&gt;
    &lt;h1&gt;Emoji Pong&lt;/h1&gt;
    &lt;!--original: &lt;canvas width="720" height="1600"&gt;&lt;/canvas&gt;--&gt;
    &lt;canvas width="244" height="530"&gt;&lt;/canvas&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
                </code>
            </pre>

            <h3>JavaScript</h3>

            <p>T√∂lts√ºk le a <a href="../7 Emoji Pong kiindul√°s/index.js">kiindul√≥f√°jlt</a> √©s n√©zz√ºk meg, mely k√≥dr√©szek √°llnak rendelkez√©s√ºnkre √©s melyeket kell m√©g nek√ºnk meg√≠rni!</p>

            <h4>Id≈ëalap√∫ anim√°ci√≥s ciklus - ism√©tl√©s</h4>
            
            <p>Ahogy azt a Szent Mih√°ly napi terel√©st szimul√°l√≥ j√°t√©k kapcs√°n eml√≠tett√ºk, az egyes sz√°m√≠t√≥g√©pek m√°s-m√°s er≈ëss√©g≈±ek, sebess√©g≈±ek √©s n√©ha akadozhatnak. J√°t√©k k√∂zben ezek a <b>megakad√°sok</b> zavar√≥ak lehetnek, de szerencs√©re van r√° <b>megold√°s</b>!</p>

            <p>Biztosan megfigyelted m√°r internetes j√°t√©kokn√°l, hogy hi√°ba "fagyott le" a k√©perny≈ë egy id≈ëre, amikor helyre√°llt, a karakterek a megfelel≈ë helyen jelentek meg √∫jra, vagyis nem ott, ahol meg√°lltak. Vegy√ºnk egy p√©ld√°t.</p>
            
            <p>K√©pzelj el egy aut√≥t, ami a j√°t√©kt√©r bal sz√©l√©t≈ël tart a jobb sz√©le fel√© egyenletes sebess√©ggel. Ehhez 5 m√°sodpercre van sz√ºks√©ge. Indul√°s ut√°n 1 m√°sodperccel lefagy a k√©perny≈ë √©s az aut√≥ egy helyben marad a k√©perny≈ën. Azonban 2 m√°sodperc m√∫lva helyre√°ll a j√°t√©k. Hol van most az aut√≥? Erre k√©tf√©le v√°lasz adhat√≥. Vagy onnan folytatja az √∫tj√°t, ahol megakadt (ahol 1 mp eltelt√©vel j√°rt), vagy onnan, ahol lennie kellene az egyenletes sebess√©g√©b≈ël ad√≥d√≥an (ahol 3 mp eltelt√©vel j√°rna). A kett≈ë k√∂z√ºl egy√©rtelm≈±en a m√°sodik adja a j√≥ felhaszn√°l√≥i √©lm√©nyt. Ez annak k√∂sz√∂nhet≈ë, hogy a <b>j√°t√©kfejleszt≈ëk</b> a karakterek mozg√°s√°t <b>az el≈ëz≈ë friss√≠t√©s √≥ta eltelt id≈ët≈ël teszik f√ºgg≈ëv√©</b>.</p>

            <p>Mit jelent ez? R√∂viden azt, hogy kisz√°moljuk, mennyi id≈ë telt el k√©t k√©perny≈ëfriss√≠t√©s k√∂z√∂tt, majd ezzel az √©rt√©kkel beszorozzuk a szerepl≈ëk mozg√°s√°t.</p>
            
            <p>Els≈ëk√©nt, fontos tudni, hogy a <span class="kodreszlet">performance.now()</span> paranccsal lek√©rdezhetj√ºk, mennyi id≈ë telt el a j√°t√©k elind√≠t√°sa √≥ta.</p>

            <p>M√°sodsorban, fontos t√°rolnunk az el≈ëz≈ë k√©pkocka √≥ta eltelt id≈ët mp-ben, amihez az anim√°ci√≥s ciklus el≈ëtt el kell t√°rolnunk az <span class="kodreszlet">el≈ëz≈ëId≈ë</span>t, majd minden ciklusban meghat√°rozzuk az <span class="kodreszlet">aktu√°lisId≈ë</span>t is. Ebb≈ël sz√°moljuk ki a delta time-ot, r√∂viden <span class="kodreszlet">dt</span>-t. Fontos gondoskodni arr√≥l, hogy ezut√°n az <span class="kodreszlet">el≈ëz≈ëId≈ë</span> lesz az <span class="kodreszlet">aktu√°lisId≈ë</span>.</p>

            <pre>
                <code>
/* === ANIM√ÅCI√ìS CIKLUS === */

<span class="kodkiemeles">let el≈ëz≈ëId≈ë = performance.now()</span>

function k√∂vetkez≈ë() {
    <span class="kodkiemeles">let aktu√°lisId≈ë = performance.now()
    let dt = (aktu√°lisId≈ë - el≈ëz≈ëId≈ë) / 1000 // az el≈ëz≈ë k√©pkocka √≥ta eltelt id≈ë mp-ben
    el≈ëz≈ëId≈ë = aktu√°lisId≈ë</span>
    friss√≠t√©s(<span class="kodkiemeles">dt</span>)
    rajzol√°s()
    requestAnimationFrame(k√∂vetkez≈ë)
}

k√∂vetkez≈ë()
                </code>
            </pre>


            <h4>Objektumok (<span class="kodreszlet">j√°t√©kos</span> √©s <span class="kodreszlet">emoji</span>) l√©trehoz√°sa</h4>

            <p>A <span class="kodreszlet">j√°t√©kos</span> szerepl≈ët fogjuk tudni ir√°ny√≠tani, amivel j√°t√©kban kell tartani az <span class="kodreszlet">emoji</span>t. Mindk√©t szerepl≈ë adatait (tulajdons√°gait) z√°rjuk egys√©gbe, vagyis objektumk√©nt t√°roljuk el a szerepl≈ëket! Az √ºtk√∂z√©s vizsg√°lata miatt mindegyiket a t√©glalap tulajdons√°gaival (<span class="kodreszlet">x</span>, <span class="kodreszlet">y</span>, <span class="kodreszlet">sz√©less√©g</span>, <span class="kodreszlet">magass√°g</span>) √≠rjuk le! A szerepl≈ëk tulajdons√°gainak √©rt√©k√©t az al√°bbiaknak megfelel≈ëen √°ll√≠tsuk be:</p>

            <p><span class="kodreszlet">j√°t√©kos</span></p>
            <ul>
                <li>v√≠zszintesen k√∂z√©pr≈ël induljon</li>
                <li>f√ºgg≈ëlegesen alul helyezkedjen el (pl. 500px)</li>
                <li>30px-es sz√©less√©ggel √©s</li>
                <li>20px-es magass√°ggal.</li>
            </ul>

            <p><span class="kodreszlet">emoji</span></p>
            <ul>
                <li>v√≠zszintesen k√∂z√©pr≈ël induljon</li>
                <li>f√ºgg≈ëlegesen k√∂z√©pr≈ël induljon</li>
                <li>30px-es sz√©less√©ggel √©s</li>
                <li>30px-es magass√°ggal, valamint</li>
                <li>v√≠zszintes sebess√©ge legyen v√©letlen 50 √©s 100 k√∂z√∂tt</li>
                <li>f√ºgg≈ëleges sebess√©ge legyen v√©letlen 100 √©s 150 k√∂z√∂tt</li>
            </ul>

            <p><span class="kodreszlet">gomb</span> - M√°r k√©sz. Ha a j√°t√©knak v√©ge, akkor:</p>
            <ul>
                <li>v√≠zszintesen k√∂z√©pen,</li>
                <li>f√ºgg≈ëlegesen alul jelenik meg</li>
                <li>100px-es sz√©less√©ggel √©s</li>
                <li>40px-es magass√°ggal.</li>
            </ul>

            <p>Tov√°bbi v√°ltoz√≥k:</p>

            <ul>
                <li><span class="kodreszlet">j√°t√©k</span>: logikai v√°ltoz√≥ annak t√°rol√°s√°ra, hogy megy-e a j√°t√©k (ha megy, akkor igaz)</li>
                <li><span class="kodreszlet">rekord</span>: a legmagasabb pont t√°rol√°s√°ra szolg√°l√≥ v√°ltoz√≥</li>
                <li><span class="kodreszlet">pont</span>: az aktu√°lis j√°t√©k aktu√°lis pontsz√°m√°t nyilv√°ntart√≥ v√°ltoz√≥</li>
                <li><span class="kodreszlet">elteltId≈ë</span>: a j√°t√©k kezdete √≥ta eltelt id≈ë mp-ben, eg√©szre kerek√≠tve (nem egyezik meg a <span class="kodreszlet">dt</span>-vel)</li>
            </ul>

            <h4>A <span class="kodreszlet">rajzol√°s()</span> f√ºggv√©ny kidolgoz√°sa</h4>

            <p>A j√°t√©knak alapvet≈ëen k√©t megjelen√©se van: (1) a <b>j√°t√©k k√∂zbeni</b> megjelen√©s √©s a (2) <b>j√°t√©k v√©g√©t</b> jelz≈ë megjelen√©s. Ez√©rt a legt√∂bb megjelen√©si be√°ll√≠t√°s a <span class="kodreszlet">j√°t√©k</span> nev≈± logikai v√°ltoz√≥t√≥l f√ºgg. P√©ld√°ul, ha a <span class="kodreszlet">j√°t√©k</span> <b>igaz</b>, akkor a h√°tt√©r b√∫za (<span class="kodreszlet">"wheat"</span>) sz√≠n≈±, k√ºl√∂nben lila-r√≥zsasz√≠n sz√≠n√°tmenetes.</p>

            <p class="feladat"><b>‚úÖFeladat</b><br>Alak√≠tsuk ki a j√°t√©k k√∂zbeni h√°tteret a fenti le√≠r√°s alapj√°n, valamint jelen√≠ts√ºk meg a <span class="kodreszlet">j√°t√©kos</span>t √©s az <span class="kodreszlet">emoji</span>t! Ut√≥bbihoz import√°ljuk a <span class="kodreszlet">cool.png</span> k√©pet!</p>

            <details>
                <summary>Megold√°s</summary>
                <pre>
                    <code>
/* === √ÅLLAPOTT√âR === */

/*Konstansok*/
<span class="kodkiemeles">const emojik√©p = new Image();
emojik√©p.src = 'cool.png';</span>

/*V√°ltoz√≥k*/
                    </code>
                </pre>

                <pre>
                    <code>
function rajzol√°s() {
    // h√°tt√©r
    if(j√°t√©k){
        <span class="kodkiemeles">ctx.fillStyle = 'wheat';
        ctx.fillRect(0, 0, canvas.width, canvas.height);</span>
    } else {
        // √Åtmenet el≈ë√°ll√≠t√°sa
        const √°tmenet=ctx.createLinearGradient(0, 0, 240, 533);
        √°tmenet.addColorStop(0, "darkOrchid");
        √°tmenet.addColorStop(1, "deepPink");

        // T√©glalap kit√∂lt√©se az √°tmenettel
        ctx.fillStyle = √°tmenet;
        ctx.fillRect(0,0, canvas.width, canvas.height);
    }
    
    // j√°t√©kos
    if(j√°t√©k) {
        <span class="kodkiemeles">ctx.fillStyle = 'black';
        ctx.fillRect(j√°t√©kos.x, j√°t√©kos.y, j√°t√©kos.sz√©less√©g, j√°t√©kos.magass√°g);</span>
    }

    ...

    // emoji
    <span class="kodkiemeles">ctx.drawImage(emojik√©p, emoji.x, emoji.y, emoji.sz√©less√©g, emoji.magass√°g);</span>
}
                    </code>
                </pre>
            </details>

            <p>A feladat elv√©gz√©se ut√°n a k√∂vetkez≈ët kell l√°tnunk:</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-kirajzolas-hatter-jatekos-emoji.png">
                    <figcaption>Az aktu√°lis √°llapot a h√°tt√©r be√°ll√≠t√°sa, valamint a <span class="kodreszlet">j√°t√©kos</span> √©s az <span class="kodreszlet">emoji</span> szerepl≈ëk kirajzol√°sa ut√°n</figcaption>
                </figure>
            </div>

            <h4>Az <span class="kodreszlet">emoji</span> mozgat√°sa</h4>

            <p>Fentebb, az <span class="kodreszlet">emoji</span> objektum kialak√≠t√°sakor hozz√°adtunk egy <span class="kodreszlet">sebX</span> √©s egy <span class="kodreszlet">sebY</span> adattagot (tulajdons√°got, √∂sszetev≈ët, stb.), ami az emoji v√≠zszintes √©s f√ºgg≈ëleges elmozdul√°s√°nak m√©rt√©k√©t adja meg. Ha csak az egyiket adn√°nk meg, akkor csak v√≠zszintesen vagy f√ºgg≈ëlegesen mozdulna el az <span class="kodreszlet">emoji</span>, de ha mindkett≈ët v√°ltoztatjuk, akkor b√°rmilyen ir√°nyba k√©pes haladni a szerepl≈ë. Sz√°munkra ez lesz az ide√°lis, mivel az emoji mozg√°sa v√©letlenszer≈± kell, hogy legyen. Forduljunk most, teh√°t a <span class="kodreszlet">friss√≠t√©s(dt)</span> f√ºggv√©nyhez √©s mozd√≠tsuk el az <span class="kodreszlet">emoji</span>t!</p>

            <p>A szerepl≈ëket (√≠gy az <span class="kodreszlet">emoji</span>t is) az <span class="kodreszlet">x</span> √©s <span class="kodreszlet">y</span> poz√≠ci√≥ja alapj√°n rajzoljuk ki, √≠gy ezeket az adattagokat kell m√≥dos√≠tani a mozgat√°s √©rdek√©ben. Erre hoztuk l√©tre a <span class="kodreszlet">sebX</span> √©s a <span class="kodreszlet">sebY</span> v√°ltoz√≥kat: ezeknek az √©rt√©k√©vel mozd√≠tjuk el az <span class="kodreszlet">emoji</span>t:</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    //gyorsabb mozg√°s
    

    // emoji mozg√°sa
    <span class="kodkiemeles">emoji.y += emoji.sebY * dt;</span>
    
    <span class="kodkiemeles">emoji.x += emoji.sebX * dt;</span>
        

    // √ºtk√∂z√©s
    

    // j√°t√©k v√©ge
    
}
                </code>
            </pre>

            <p>Siker√ºlt megoldani az <span class="kodreszlet">emoji</span> mozgat√°s√°t, de ennek m√©g vannak hi√°nyoss√°gai, mivel elhagyja a j√°t√©kteret, nem pattan vissza a j√°t√©kt√©r sz√©l√©r≈ël.</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-jatekter-elhagyasa-jobb-oldalon.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> elhagyja a j√°t√©kteret a jobb oldalon</figcaption>
                </figure>
            </div>

            <p>Gondoskodjunk arr√≥l, hogy az <span class="kodreszlet">emoji</span> ne mehessen ki a j√°t√©kt√©r jobb √©s bal oldal√°n, valamint fel√ºl. (Alul elhagyhatja a j√°t√©kteret, ez alapj√°n lesz v√©ge a j√°t√©knak.)</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    //gyorsabb mozg√°s
    

    // emoji mozg√°sa
    emoji.y += emoji.sebY * dt;
    <span class="kodkiemeles">if(emoji.y &lt; 0) {
        emoji.y = 1;
        emoji.sebY *= (-1);
    }</span>
    emoji.x += emoji.sebX * dt;
    <span class="kodkiemeles">if(emoji.x > canvas.width - emoji.sz√©less√©g) {
        emoji.sebX *= (-1);
    }
    if(emoji.x &lt; 0) {
        emoji.sebX *= (-1);
    }</span>

    // √ºtk√∂z√©s
    

    // j√°t√©k v√©ge
    
}
                </code>
            </pre>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-visszapattan-jobb-oldalrol-1.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> a j√°t√©kt√©r jobb oldala fel√© tart</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-visszapattan-jobb-oldalrol-2.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> visszapattan a j√°t√©kt√©r jobb oldal√°r√≥l</figcaption>
                </figure>
            </div>

            <h4>A <span class="kodreszlet">j√°t√©kos</span> mozgat√°sa az eg√©rmutat√≥ poz√≠ci√≥ja alapj√°n</h4>

            <p>A Megh√≠v√≥ c. j√°t√©kn√°l m√°r megoldottuk az eg√©rmutat√≥ poz√≠ci√≥j√°nak lek√©rdez√©s√©t - oda gener√°ltunk pontot, ahol az eg√©rmutat√≥ a kattint√°s pillanat√°ban volt. Most annyi m√≥dos√≠t√°sra lesz sz√ºks√©g, hogy a <span class="kodreszlet">j√°t√©kos</span>t kell az eg√©rmutat√≥hoz tenni. Ezt azonban csak akkor tegy√ºk meg, ha m√©g tart a j√°t√©k √©s az eg√©rmutat√≥ a j√°t√©kt√©ren van. Ezek alapj√°n eg√©sz√≠ts√ºk ki a <span class="kodreszlet">"mousemove"</span> esem√©nyt.</p>

            <pre>
                <code>
/* === ESEM√âNYEK === */

// j√°t√©kos mozgat√°sa eg√©rrel
document.addEventListener('mousemove', function(e) {
    <span class="kodkiemeles">if(j√°t√©k && e.offsetX &lt; canvas.width && e.offsetX > 0) {
        j√°t√©kos.x = e.offsetX - j√°t√©kos.sz√©less√©g / 2;
    }</span>
})
...
                </code>
            </pre>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-jatekos-mozgatasa-1.png">
                    <figcaption>A <span class="kodreszlet">j√°t√©kos</span> k√∂veti az eg√©rmutat√≥t (bal oldalon)</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-jatekos-mozgatasa-2.png">
                    <figcaption>A <span class="kodreszlet">j√°t√©kos</span> k√∂veti az eg√©rmutat√≥t (k√∂z√©pen)</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-jatekos-mozgatasa-3.png">
                    <figcaption>A <span class="kodreszlet">j√°t√©kos</span> k√∂veti az eg√©rmutat√≥t (jobb oldalon)</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-jatekos-mozgatasa-4.png">
                    <figcaption>Amikor az eg√©rmutat√≥ elhagyja a j√°t√©kteret valamelyik oldalon, a <span class="kodreszlet">j√°t√©kos</span> meg√°ll.</figcaption>
                </figure>
            </div>

            <h4>Az <span class="kodreszlet">emoji</span> j√°t√©kt√©ren tart√°sa</h4>

            <p>M√°r mozog az <span class="kodreszlet">emoji</span>nk, √©s tudjuk ir√°ny√≠tani a <span class="kodreszlet">j√°t√©kos</span>t. Adja mag√°t a k√∂vetkez≈ë l√©p√©s, az <span class="kodreszlet">emoji</span> leveg≈ëben tart√°sa.</p>

            <p>Ez nem m√°s, mint az <span class="kodreszlet">emoji</span> ir√°ny√°nak (f√ºgg≈ëleges sebess√©g√©nek) megford√≠t√°sa, vagyis <span class="kodreszlet">-1</span>-gyel val√≥ megszorz√°sa akkor, ha az a <span class="kodreszlet">j√°t√©kos</span>sal √ºtk√∂zik. Ekkor kapjunk egy pontot is!</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    //gyorsabb mozg√°s
    

    // emoji mozg√°sa
    emoji.y += emoji.sebY * dt;
    if(emoji.y &lt; 0) {
        emoji.y = 1;
        emoji.sebY *= (-1);
    }
    emoji.x += emoji.sebX * dt;
    if(emoji.x > canvas.width - emoji.sz√©less√©g) {
        emoji.sebX *= (-1);
    }
    if(emoji.x &lt; 0) {
        emoji.sebX *= (-1);
    }

    // √ºtk√∂z√©s
    <span class="kodkiemeles">if(√ºtk√∂znek(emoji, j√°t√©kos)) {
        emoji.sebY *= (-1);
        pont += 1;
    }</span>

    // j√°t√©k v√©ge
    
}
                </code>
            </pre>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-visszapattan-jatekosrol-1.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> jobbra lefel√© mozog a <span class="kodreszlet">j√°t√©kos</span> fel√©</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-visszapattan-jatekosrol-2.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> √ºtk√∂zik a <span class="kodreszlet">j√°t√©kos</span>sal</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-visszapattan-jatekosrol-3.png">
                    <figcaption>Az √ºtk√∂z√©s ut√°n az <span class="kodreszlet">emoji</span> f√ºgg≈ëleges sebess√©ge (√©s √≠gy az ir√°nya is) megv√°ltozik: jobbra f√∂lfel√© halad tov√°bb</figcaption>
                </figure>
            </div>

            <h4>A j√°t√©k v√©ge</h4>

            <p>A j√°t√©knak akkor van v√©ge, ha az <span class="kodreszlet">emoji</span>t nem tudjuk vissza√ºtni, vagyis az <b>elhalad mellett√ºnk</b>. M√°r akkor is v√©ge van a j√°t√©knak, ha az <span class="kodreszlet">emoji</span> alja a <span class="kodreszlet">j√°t√©kos</span> tetej√©n√©l lentebb megy, m√°s sz√≥val a <span class="kodreszlet">j√°t√©kos</span> legfels≈ë pontja magasabban van, mint az <span class="kodreszlet">emoji</span> legals√≥ pontja. Vil√°gos, hogy ez csak akkor fordulhat el≈ë, ha v√≠zszintesen nincs k√∂zt√ºk √°tfed√©s, k√ºl√∂nben visszapattanna az <span class="kodreszlet">emoji</span>. Eml√©kezz√ºnk vissza, hogy milyen alakzatk√©nt t√°roljuk az <span class="kodreszlet">emoji</span>t √©s a <span class="kodreszlet">j√°t√©kos</span>t: t√©glalapokk√©nt. Az al√°bbi k√©psorozaton a piros szaggatott t√©glalapok jelzik az objektumok √°ltal le√≠rt t√©glalapokat, vagyis a szerepl≈ëk t√©nyleges kiterjed√©s√©t. A z√∂ld s√°v az <span class="kodreszlet">emoji</span> √©s a <span class="kodreszlet">j√°t√©kos</span> objektum k√∂z√∂tti f√ºgg≈ëleges t√°vols√°got jelenti. A z√∂ld s√°v jelenl√©te egyben azt is jelzi, hogy m√©g menthet≈ë az <span class="kodreszlet">emoji</span>.</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-elmulaszt-1.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> lefel√© mozog</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-elmulaszt-2.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> tov√°bbra is lefel√© mozog. Ha nem toljuk al√° a <span class="kodreszlet">j√°t√©kos</span>t, akkor alul elhagyja a j√°t√©kteret.</figcaption>
                </figure>
                <figure>
                    <img src="k√©pek/emoji-elmulaszt-3.png">
                    <figcaption>Az <span class="kodreszlet">emoji</span> alja lentebb ker√ºlt, mint a <span class="kodreszlet">j√°t√©kos</span> teteje, ez√©rt v√©ge a j√°t√©knak</figcaption>
                </figure>
            </div>

            <p>A j√°t√©k v√©g√©nek ellen≈ërz√©s√©hez (vagyis az √ºtk√∂z√©s elmulaszt√°s√°hoz) tudnunk k√©ne, mi az <span class="kodreszlet">emoji</span> alj√°nak poz√≠ci√≥ja. Mivel ismerj√ºk ezeknek a t√©glalapoknak a bal fels≈ë sark√°t (<span class="kodreszlet">x</span>, <span class="kodreszlet">y</span>), valamint a <span class="kodreszlet">sz√©less√©g</span>√©t √©s a <span class="kodreszlet">magass√°g</span>√°t, ez k√∂nnyen kisz√°m√≠that√≥.</p>

            <p>A j√°t√©k v√©g√©t t√°roljuk el a <span class="kodreszlet">j√°t√©k</span> nev≈± v√°ltoz√≥ban (√°ll√≠tsuk azt hamisra)! Tov√°bb√°, ha t√∂bb pontot szerezt√ºnk ebben a menetben, mint valaha, akkor a <span class="kodreszlet">rekord</span>ot √°ll√≠tsuk √°t az aktu√°lisan szerzett <span class="kodreszlet">pont</span>ra.</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    //gyorsabb mozg√°s
    

    // emoji mozg√°sa
    emoji.y += emoji.sebY * dt;
    if(emoji.y &lt; 0) {
        emoji.y = 1;
        emoji.sebY *= (-1);
    }
    emoji.x += emoji.sebX * dt;
    if(emoji.x > canvas.width - emoji.sz√©less√©g) {
        emoji.sebX *= (-1);
    }
    if(emoji.x &lt; 0) {
        emoji.sebX *= (-1);
    }

    // √ºtk√∂z√©s
    if(√ºtk√∂znek(emoji, j√°t√©kos)) {
        emoji.sebY *= (-1);
        pont += 1;
    }

    // j√°t√©k v√©ge
    <span class="kodkiemeles">if(emoji.y + emoji.magass√°g > j√°t√©kos.y) {
        j√°t√©k = false;
        if(pont > rekord) {
            rekord = pont;
        }
    }</span>
}
                </code>
            </pre>

            <p>A j√°t√©k v√©g√©n az <span class="kodreszlet">emoji</span> ki√∫szik a j√°t√©kt√©rr≈ël alul, a h√°tt√©r a sz√≠n√°tmenetesre v√°lt, √©s amennyiben rekordot d√∂nt√∂tt√ºnk, azt is l√°tjuk a jobb fels≈ë sarokban:</p>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-vege-kep-1.png">
                    <figcaption>A j√°t√©k v√©g√©n megjelen≈ë grafika</figcaption>
                </figure>
            </div>

            <h4>A <span class="kodreszlet">pont</span> ki√≠r√°sa</h4>

            <p>Az aktu√°lis pontot nagy bet≈±kkel k√∂z√©pre √≠rjuk ki, az <span class="kodreszlet">emoji</span> m√∂g√©. Azonban fontos l√°tni, hogy min√©l t√∂bbjegy≈± a pontsz√°m, ann√°l balr√°bb kell kezdeni a ki√≠r√°st, hogy l√°tsz√≥lag tov√°bbra is k√∂z√©pen maradjon a sz√∂veg. Egy sz√°mjegyn√©l a sz√∂veg <span class="kodreszlet">x</span> poz√≠ci√≥ja <span class="kodreszlet">canvas.width / 2 - 25</span>, k√©t sz√°mjegyn√©l <span class="kodreszlet">canvas.width / 2 - 60</span>. A felhaszn√°l√≥bar√°t, ergonomikus √©s eszt√©tikus megjelen√≠t√©s miatt a pontsz√°m sz√≠n√©t a h√°tt√©rt≈ël f√ºgg≈ëen (vagyis a <span class="kodreszlet">j√°t√©k</span> v√°ltoz√≥ √©rt√©k√©t≈ël f√ºgg≈ëen) m√≥dos√≠tanunk kell.</p>

            <pre>
                <code>
function rajzol√°s() {
    // h√°tt√©r
    ...

    // j√°t√©kos
    ...

    // √öJRA gomb
    ...

    // √∫jra sz√∂veg
    ...
    
    // rekord
    ...

    // pont
    <span class="kodkiemeles">ctx.font = '100px Arial';
    if(j√°t√©k){
        ctx.fillStyle = '#BBA156';
    } else {
        ctx.fillStyle = 'lightgray';
    }
    if(pont &lt; 10) {
        ctx.fillText(pont, canvas.width / 2 - 25, canvas.height / 2);
    } else {
        ctx.fillText(pont, canvas.width / 2 - 60, canvas.height / 2);
    }</span>

    // emoji
    ...
}
                </code>
            </pre>

            <h4>A j√°t√©k √∫jrakezd√©se</h4>

            <p>A j√°t√©kot √∫gy kezdhetj√ºk √∫jra, hogy megjelen√≠t√ºnk egy "gombot", amire tesz√ºnk egy "√öJRA" feliratot, √©s ha r√°kattintunk, akkor √∫jraindul a j√°t√©k, hogy √∫jabb rekordokat d√∂nts√ºnk. A "gomb" az√©rt van id√©z≈ëjelben, mert ez nem lesz t√©nylegesen gomb, hanem csak egy t√©glalap alak√∫ objektum (ez m√°r l√©tre van hozva), amire a szok√°sos m√≥don elhelyezz√ºk a feliratot, majd ellen≈ërizz√ºk, hogy a kattint√°s pillanat√°ban a gomb ter√ºlet√©n volt-e az eg√©rmutat√≥.</p>

            <p>A <span class="kodreszlet">rajzol√°s()</span> f√ºggv√©nyben jelen√≠ts√ºk meg ezt a "gombot" √©s a hozz√° tartoz√≥ feliratot (ut√≥bbit kb. a gomb k√∂zep√©re pr√≥b√°ljuk meg helyezni), de csak akkor, ha v√©ge van a j√°t√©knak (vagyis a <span class="kodreszlet">j√°t√©k</span> √©rt√©ke hamis)! Ezzel elk√©sz√ºlt a teljes <span class="kodreszlet">rajzol√°s()</span> f√ºggv√©ny:</p>

            <pre>
                <code>
function rajzol√°s() {
    // h√°tt√©r
    if(j√°t√©k){
        ctx.fillStyle = 'wheat';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    } else {
        // √Åtmenet el≈ë√°ll√≠t√°sa
        const √°tmenet=ctx.createLinearGradient(0, 0, 240, 533);
        √°tmenet.addColorStop(0, "darkOrchid");
        √°tmenet.addColorStop(1, "deepPink");

        // T√©glalap kit√∂lt√©se az √°tmenettel
        ctx.fillStyle = √°tmenet;
        ctx.fillRect(0,0, canvas.width, canvas.height);
    }

    // j√°t√©kos
    if(j√°t√©k) {
        ctx.fillStyle = 'black';
        ctx.fillRect(j√°t√©kos.x, j√°t√©kos.y, j√°t√©kos.sz√©less√©g, j√°t√©kos.magass√°g);
    }

    // √öJRA gomb
    if(!j√°t√©k) {
        <span class="kodkiemeles">ctx.fillStyle = 'white';
        ctx.fillRect(gomb.x, gomb.y, gomb.sz√©less√©g, gomb.magass√°g);</span>
    }

    // √∫jra sz√∂veg
    <span class="kodkiemeles">if(!j√°t√©k){
        ctx.font = '30px Arial';
        ctx.fillStyle = 'black';
        ctx.fillText('√öJRA', gomb.x + gomb.sz√©less√©g / 9, gomb.y + gomb.magass√°g / 5 * 4);
    }</span>
    
    // rekord
    ctx.font = '10px Arial';
    if(j√°t√©k){
        ctx.fillStyle = '#8F692A';
    } else {
        ctx.fillStyle = 'lightgray';
    }
    ctx.fillText('REKORD: ' + rekord, 170, 20);

    // pont
    ctx.font = '100px Arial';
    if(j√°t√©k){
        ctx.fillStyle = '#BBA156';
    } else {
        ctx.fillStyle = 'lightgray';
    }
    if(pont &lt; 10) {
        ctx.fillText(pont, canvas.width / 2 - 25, canvas.height / 2);
    } else {
        ctx.fillText(pont, canvas.width / 2 - 60, canvas.height / 2);
    }

    // emoji
    ctx.drawImage(emojik√©p, emoji.x, emoji.y, emoji.sz√©less√©g, emoji.magass√°g);
}
                </code>
            </pre>

            <div class="kepsor">
                <figure>
                    <img src="k√©pek/emoji-vege-kep-gombbal-1.png">
                    <figcaption>Az √öJRA gomb megjelenik</figcaption>
                </figure>
            </div>

            <p>Ugyan megjelent az √öJRA gomb, m√©g le kell kezeln√ºnk a f√∂l√∂tte t√∂rt√©n≈ë kattint√°st. A kattint√°s esem√©ny m√°r rendelkez√©sre √°ll a forr√°sk√≥d alj√°n, de m√©g nincs megfogalmazva, hogy "ha m√°r v√©ge a j√°t√©knak, √©s a gomb ter√ºlet√©n kattintunk egyet, akkor h√≠vjuk meg a <span class="kodreszlet">kezdes()</span> f√ºggv√©nyt". A <span class="kodreszlet">kezdes()</span> f√ºggv√©nyben fogjuk vissza√°ll√≠tani a j√°t√©k egyes v√°ltoz√≥it a kezd≈ë√©rt√©kekre, hogy √∫jrainduljon a j√°t√©k. G√∂rgess√ºnk le, teh√°t, a <span class="kodreszlet">kezdes()</span> f√ºggv√©nyhez, √©s eg√©sz√≠ts√ºk ki a k√∂vetkez≈ëk√©ppen:</p>

            <ul>
                <li>a <span class="kodreszlet">j√°t√©kos</span>t helyezz√ºk vissza k√∂z√©pen alulra,</li>
                <li>az <span class="kodreszlet">emoji</span>t helyezz√ºk vissza a j√°t√©kt√©r k√∂zep√©re, √©s</li>
                <li>a sebess√©g√©t ism√©t gener√°ljuk lassabbra a j√°t√©k elej√©n megadott intervallumokat haszn√°lva,</li>
                <li>a <span class="kodreszlet">j√°t√©k</span> v√°ltoz√≥t √°ll√≠tsuk igazra (tudj√°tok, ett≈ël f√ºgg sok m√°s szerepl≈ë feladata √©s megjelen√©se), valamint</li>
                <li>a <span class="kodreszlet">pont</span> √©s az <span class="kodreszlet">elteltId≈ë</span> legyen <span class="kodreszlet">0</span>.</li>
            </ul>

            <h4>A j√°t√©k tov√°bbfejleszt√©se - gyorsul√≥ <span class="kodreszlet">emoji</span></h4>

            <p>A feladat, hogy az <span class="kodreszlet">emoji</span> 5 mp-enk√©nt legyen gyorsabb. Onnan tudjuk, hogy eltelt 5 m√°sodperc, hogy a j√°t√©k kezdete √≥ta eltelt id≈ë eg√©sz m√°sodpercre kerek√≠tve marad√©k n√©lk√ºl oszthat√≥ √∂ttel. M√°sk√©pp fogalmazva, ha az eltelt id≈ë 5-tel val√≥ oszt√°si marad√©ka 0, akkor n√∂velj√ºk az emoji sebess√©g√©t.</p>

            <p>A sebess√©g n√∂vel√©se azonban nem teljesen trivi√°lis, ugyanis nem mindegy, hogy az <span class="kodreszlet">emoji</span> merre halad a sebess√©gn√∂vel√©s pillanat√°ban. Ha ugyanis a sebess√©ge pozit√≠v, akkor n√∂velni kell a sebess√©g√©t, azonban ha a sebess√©g negat√≠v, akkor tov√°bb kell cs√∂kkenteni azt, hogy gyorsabban haladjon. A sebess√©get b√°rmilyen √©rt√©kkel n√∂velhetj√ºk att√≥l f√ºgg≈ëen, hogy mennyire szeretn√©nk neh√©z j√°t√©kot k√©sz√≠teni. Pr√≥b√°ljunk ki t√∂bb sebess√©get is!</p>

            <pre>
                <code>
function friss√≠t√©s(dt) {
    //gyorsabb mozg√°s
    <span class="kodkiemeles">elteltId≈ë = Math.round(Math.round(performance.now()) / 1000);
    if(elteltId≈ë &gt; 0 && elteltId≈ë % 5 == 0) {
        if(emoji.sebX &lt; 0) { emoji.sebX -= dt * 10 } else { emoji.sebX += dt * 10 };
        if(emoji.sebY &lt; 0) { emoji.sebY -= dt * 10} else { emoji.sebY += dt * 10 };
    }</span>

    // emoji mozg√°sa
    ...
    ...
}
                </code>
            </pre>

            Ezzel elk√©sz√ºlt√ºnk a teljes j√°t√©kkal, <b>gratul√°lok</b>! üòé

            <div  class="feladatextra">
                <p><b>‚ú®EXTRA Feladatok</b></p>
                <p>M√≥dos√≠tsd a <span class="kodreszlet">j√°t√©kos</span> sz√©less√©g√©t √©s az <span class="kodreszlet">emoji</span> sebess√©gn√∂vel√©s√©t att√≥l f√ºgg≈ëen, milyen neh√©z j√°t√©kot szeretn√©l!</p>
                <p>Haszn√°lj m√°s emojit!</p>
            </div>

        </div>

    </main>

    <footer>
        <div>
            <p><b>K√©sz√≠tette</b>: Csom√≥s B√°lint</p>
            <p><b>Neptun k√≥d</b>: C1224B</p>
            <p><b>Kapcsolat</b>: csomosbalint@student.elte.hu</p>
            <p><b>T√©mavezet≈ë</b>: Dr Bern√°t P√©ter</p>
            <p><b>K√©sz√ºlt</b>: 2024-2025</p>
        </div>
        
        <div>
            <figure>
                <img src="k√©pek/elte_ik_fekvo_hosszu_logo_rgb_feher-01.png">
            </figure>
        </div>
    </footer>
</body>
</html>